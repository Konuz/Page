{
  "version": 3,
  "sources": ["../../script.js"],
  "sourcesContent": ["// Skrypt za\u0142adowany\n\nconst DEV_MODE = (typeof __DEV__ !== 'undefined') ? __DEV__ : (\n    typeof window !== 'undefined' && (\n        window.location.hostname === 'localhost' ||\n        window.location.hostname === '127.0.0.1' ||\n        window.location.hostname.startsWith('192.168.') ||\n        window.location.protocol === 'file:'\n    )\n);\n\n// Kompleksowa obs\u0142uga b\u0142\u0119d\u00F3w CORS - g\u0142\u00F3wnie dla \u015Brodowiska deweloperskiego\nif (DEV_MODE) {\n    (function() {\n        'use strict';\n        \n        // Lista wzorc\u00F3w b\u0142\u0119d\u00F3w do ignorowania\n        const ignoredErrors = [\n            'cross-origin frame',\n            'SecurityError',\n            'Blocked a frame with origin',\n            'Permission denied to access property',\n            'Failed to read a named property',\n            'Script error',\n            'Non-Error promise rejection captured',\n            'ResizeObserver loop limit exceeded'\n        ];\n        \n        // Obs\u0142uga b\u0142\u0119d\u00F3w globalnych\n        window.addEventListener('error', function(event) {\n            const message = event.message || '';\n            const filename = event.filename || '';\n            \n            // Sprawd\u017A czy to b\u0142\u0105d CORS lub zwi\u0105zany z zewn\u0119trznymi skryptami\n            if (ignoredErrors.some(pattern => message.includes(pattern)) ||\n                filename.includes('google') ||\n                filename.includes('maps') ||\n                filename.includes('all.iife.js') ||\n                filename.includes('cdnjs.cloudflare.com')) {\n                console.debug('Ignoruj\u0119 b\u0142\u0105d zewn\u0119trznego skryptu', {\n                    message: message.substring(0, 100),\n                    filename,\n                    source: 'iframe/external',\n                    protocol: window.location.protocol,\n                    hostname: window.location.hostname,\n                    note: 'Ten b\u0142\u0105d prawdopodobnie zniknie na hostingu HTTPS'\n                });\n\n                event.preventDefault();\n                event.stopPropagation();\n                return false;\n            }\n        }, true);\n        \n        // Obs\u0142uga nieprzechwyconych promise rejections\n        window.addEventListener('unhandledrejection', function(event) {\n            const reason = event.reason || '';\n            const reasonStr = reason.toString ? reason.toString() : String(reason);\n            \n            if (ignoredErrors.some(pattern => reasonStr.includes(pattern))) {\n                event.preventDefault();\n                return false;\n            }\n        });\n        \n        // Przywr\u00F3\u0107 oryginalne console.error z filtrowaniem\n        const originalError = console.error;\n        console.error = function(...args) {\n            const message = args.join(' ');\n            if (!ignoredErrors.some(pattern => message.includes(pattern))) {\n                originalError.apply(console, args);\n            }\n        };\n        \n    })();\n}\n\n// ===== Helper: Add media query listener with fallback =====\nfunction addMediaListener(query, handler) {\n    if (typeof query.addEventListener === 'function') {\n        query.addEventListener('change', handler);\n    } else if (typeof query.addListener === 'function') {\n        query.addListener(handler);\n    }\n}\n\n// ===== LIMIT VISIBLE TOOLS TO 12 WITH SCROLL (desktop) =====\nfunction setupGridScrollLimit() {\n    const desktopQuery = window.matchMedia('(min-width: 992px)');\n    const updateGridState = () => {\n        const isDesktop = desktopQuery.matches;\n        document.querySelectorAll('.tools-grid').forEach((grid) => {\n            const shouldScroll = isDesktop && grid.children.length > 12;\n            grid.classList.toggle('grid-scroll', shouldScroll);\n        });\n    };\n\n    updateGridState();\n    addMediaListener(desktopQuery, updateGridState);\n}\n\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', setupGridScrollLimit);\n} else {\n    setupGridScrollLimit();\n}\n\n// ===== Limit submenu visible items to 12 with scroll =====\nfunction setupSubmenuScrollLimit(visibleCount = 12) {\n    const recalc = () => {\n        document\n            .querySelectorAll('#nav-categories .sub-dropdown .sub-dropdown-content')\n            .forEach((contentEl) => {\n                if (!contentEl) return;\n                const shouldScroll = contentEl.querySelectorAll('a').length > visibleCount;\n                contentEl.classList.toggle('submenu-scrollable', shouldScroll);\n            });\n    };\n\n    recalc();\n\n    const desktopQuery = window.matchMedia('(min-width: 992px)');\n    addMediaListener(desktopQuery, recalc);\n}\n\n// ===== COOKIE MANAGER =====\nclass CookieManager {\n    static TRACKING_PATTERNS = ['_ga', '_fb', '_clck', '_clsk'];\n    static CONSENT_KEY = 'cookieConsent';\n    \n    // Get consent status from localStorage\n    static getConsentStatus() {\n        return localStorage.getItem(this.CONSENT_KEY);\n    }\n    \n    // Set consent status in localStorage\n    static setConsentStatus(status) {\n        localStorage.setItem(this.CONSENT_KEY, status);\n    }\n    \n    // Check if specific tracking cookies exist\n    static hasTrackingCookies(patterns = this.TRACKING_PATTERNS) {\n        return document.cookie\n            .split(';')\n            .some(cookie => {\n                const name = cookie.trim().split('=')[0];\n                return patterns.some(pattern => name.includes(pattern));\n            });\n    }\n    \n    // Get specific cookies by pattern\n    static getCookiesByPattern(patterns) {\n        return document.cookie\n            .split(';')\n            .filter(cookie => {\n                const name = cookie.trim().split('=')[0];\n                return patterns.some(pattern => name.includes(pattern));\n            })\n            .map(cookie => cookie.trim());\n    }\n    \n    // Remove tracking cookies (GDPR compliance)\n    static removeTrackingCookies(patterns = this.TRACKING_PATTERNS) {\n        let removedCount = 0;\n        \n        document.cookie.split(\";\").forEach(cookie => {\n            const eqPos = cookie.indexOf(\"=\");\n            const name = eqPos > -1 ? cookie.substr(0, eqPos).trim() : cookie.trim();\n            \n            if (patterns.some(pattern => name.includes(pattern))) {\n                // Remove for current path\n                document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`;\n                // Remove for current domain\n                document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`;\n                removedCount++;\n            }\n        });\n        \n        return removedCount;\n    }\n    \n    // Check if consent matches cookie state\n    static validateConsentState() {\n        const consent = this.getConsentStatus();\n        const shouldHaveCookies = consent === 'accepted';\n        const hasCookies = this.hasTrackingCookies();\n        \n        return {\n            consent,\n            shouldHaveCookies,\n            hasCookies,\n            isValid: shouldHaveCookies === hasCookies,\n            timestamp: new Date().toISOString()\n        };\n    }\n    \n    // Get Clarity-specific cookies\n    static getClarityCookies() {\n        return this.getCookiesByPattern(['_clck', '_clsk']);\n    }\n    \n    // Check if Clarity cookies exist\n    static hasClarityCookies() {\n        return this.hasTrackingCookies(['_clck', '_clsk']);\n    }\n}\n\n// ===== ANALYTICS NAMESPACE =====\nconst Analytics = {\n    // Core script loading functionality\n    loadScript(src, attrs = {}) {\n        const s = document.createElement('script');\n        s.src = src;\n        s.async = true;\n        Object.entries(attrs).forEach(([k, v]) => s.setAttribute(k, v));\n        return new Promise((resolve, reject) => {\n            s.onload = () => resolve(src);\n            s.onerror = () => reject(new Error(`Failed to load script: ${src}`));\n            document.head.appendChild(s);\n        });\n    },\n\n    // Facebook Pixel Stub Function\n    ensureFbqStub() {\n    if (typeof window.fbq === 'undefined') {\n        (function(f,b,e,v,n,t,s){\n            if(f.fbq)return; n=f.fbq=function(){ n.callMethod ?\n                n.callMethod.apply(n,arguments) : n.queue.push(arguments) };\n            if(!f._fbq)f._fbq=n; n.push=n; n.loaded=!0; n.version='2.0';\n            n.queue=[]; t=b.createElement(e); t.async=!0; t.src=v; s=b.getElementsByTagName(e)[0];\n            s.parentNode.insertBefore(t,s);\n        })(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');\n    }\n    },\n\n    // Specialized tracking loaders\n    async loadGTM() {\n        try {\n            window.dataLayer = window.dataLayer || [];\n            window.dataLayer.push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });\n            await Analytics.loadScript('https://www.googletagmanager.com/gtm.js?id=GTM-WLNRPMGP');\n        \n            // Update consent if gtag is available\n            if (typeof window.gtag !== 'undefined') {\n                window.gtag('consent', 'update', {\n                    'analytics_storage': 'granted',\n                    'ad_storage': 'granted',\n                    'functionality_storage': 'granted',\n                    'personalization_storage': 'granted',\n                    'security_storage': 'granted'\n                });\n            }\n            return { success: true, service: 'GTM' };\n        } catch (error) {\n            return { success: false, service: 'GTM', error: error.message };\n        }\n    },\n\n    async loadFacebookPixel() {\n        try {\n            Analytics.ensureFbqStub();\n            window.fbq('init', '1469053347622952');\n            window.fbq('track', 'PageView');\n            \n            // Grant consent if available\n            if (typeof window.fbq !== 'undefined') {\n                window.fbq('consent', 'grant');\n            }\n            return { success: true, service: 'Facebook Pixel' };\n        } catch (error) {\n            return { success: false, service: 'Facebook Pixel', error: error.message };\n        }\n    },\n\n    async loadMicrosoftClarity() {\n        try {\n            // Load Clarity script\n            (function(c,l,a,r,i,t,y){\n                c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};\n                t=l.createElement(r);t.async=1;t.src=\"https://www.clarity.ms/tag/\"+i;\n                y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);\n            })(window, document, \"clarity\", \"script\", \"t5f2ixde6f\");\n            \n            // Set consent with proper error handling\n            await setClarityConsent(true);\n            \n            // Validate after initialization\n            setTimeout(async () => {\n                try {\n                    await validateClarityConsent();\n                } catch(e) {\n                    console.warn('\u26A0\uFE0F Validation failed:', e.message);\n                }\n            }, 5000);\n            \n            return { success: true, service: 'Microsoft Clarity' };\n        } catch (error) {\n            return { success: false, service: 'Microsoft Clarity', error: error.message };\n        }\n    }\n};\n\n// Main tracking loader function (uses Analytics namespace)\nasync function loadTrackingScripts() {\n    if (window.__trackingLoaded) return;\n    window.__trackingLoaded = true;\n\n    // Load all trackers in parallel with individual error handling\n    const trackingResults = await Promise.allSettled([\n        Analytics.loadGTM(),\n        Analytics.loadFacebookPixel(), \n        Analytics.loadMicrosoftClarity()\n    ]);\n\n    // Process results and log outcomes\n    const successful = [];\n    const failed = [];\n    \n    trackingResults.forEach((result, index) => {\n        if (result.status === 'fulfilled') {\n            const { success, service, error } = result.value;\n            if (success) {\n                successful.push(service);\n            } else {\n                failed.push(`${service}: ${error}`);\n            }\n        } else {\n            failed.push(`Unknown tracker: ${result.reason}`);\n        }\n    });\n    \n    if (successful.length > 0) {\n    }\n    if (failed.length > 0) {\n        console.warn(`\u26A0\uFE0F Tracking failed: ${failed.join('; ')}`);\n    }\n}\n\n// Funkcja do komunikacji statusu zgody z Microsoft Clarity\nfunction setClarityConsent(granted, maxAttempts = 5, currentAttempt = 1) {\n    return new Promise((resolve, reject) => {\n        const timeout = setTimeout(() => {\n            reject(new Error('setClarityConsent timeout after 10 seconds'));\n        }, 10000);\n\n        function attemptConsent() {\n            try {\n                if (typeof window.clarity !== 'undefined' && typeof window.clarity === 'function') {\n                    clearTimeout(timeout);\n                    if (granted) {\n                        window.clarity('consent', 'grant');\n                    } else {\n                        window.clarity('consent', 'deny');\n                    }\n                    resolve(true);\n                } else if (currentAttempt < maxAttempts) {\n                    // Exponential backoff: 500ms, 1s, 2s, 4s\n                    const delay = 500 * Math.pow(2, currentAttempt - 1);\n                    setTimeout(() => {\n                        setClarityConsent(granted, maxAttempts, currentAttempt + 1)\n                            .then(resolve)\n                            .catch(reject);\n                    }, delay);\n                } else {\n                    clearTimeout(timeout);\n                    reject(new Error(`Microsoft Clarity not available after ${maxAttempts} attempts`));\n                }\n            } catch(e) {\n                clearTimeout(timeout);\n                reject(e);\n            }\n        }\n\n        attemptConsent();\n    });\n}\n\n// Funkcja do ponownego wy\u015Bwietlenia popup zgody\nfunction showCookieSettings() {\n    const cookiePopup = document.getElementById('cookie-popup');\n    if (cookiePopup) {\n        cookiePopup.classList.remove('hidden');\n        cookiePopup.style.display = 'block';\n    }\n}\n\n// Funkcja do obs\u0142ugi zmiany zgody z accepted na rejected\nfunction revokeCookieConsent() {\n    // Usu\u0144 wszystkie cookies trackingowe u\u017Cywaj\u0105c CookieManager\n    const removedCount = CookieManager.removeTrackingCookies();\n    \n    // Poinformuj trackery o odwo\u0142aniu zgody\n    setClarityConsent(false).catch(e => {\n        console.warn('\u26A0\uFE0F Microsoft Clarity consent revocation failed:', e.message);\n    });\n    if (typeof window.fbq !== 'undefined') {\n        try { window.fbq('consent', 'revoke'); } catch(_) {}\n    }\n    if (typeof window.gtag !== 'undefined') {\n        window.gtag('consent', 'update', {\n            'analytics_storage': 'denied',\n            'ad_storage': 'denied',\n            'functionality_storage': 'denied',\n            'personalization_storage': 'denied',\n            'security_storage': 'denied'\n        });\n    }\n}\n\n// Funkcja walidacji statusu zgody Microsoft Clarity\nasync function validateClarityConsent() {\n    try {\n        if (typeof window.clarity === 'undefined') {\n            console.warn('\u26A0\uFE0F Microsoft Clarity: Skrypt nie jest za\u0142adowany');\n            return false;\n        }\n\n        const consentStatus = CookieManager.getConsentStatus();\n        const shouldHaveCookies = consentStatus === 'accepted';\n        const hasClarityCookies = CookieManager.hasClarityCookies();\n        \n        if (shouldHaveCookies === hasClarityCookies) {\n            const status = shouldHaveCookies ? 'zgoda udzielona i cookies aktywne' : 'zgoda cofni\u0119ta i cookies nieaktywne';\n            return true;\n        }\n        \n        if (shouldHaveCookies && !hasClarityCookies) {\n            // Cookies mog\u0105 si\u0119 pojawi\u0107 z op\u00F3\u017Anieniem - czekaj chwil\u0119\n            \n            await new Promise(resolve => setTimeout(resolve, 3000));\n            \n            const finalCookiesExist = CookieManager.hasClarityCookies();\n            if (finalCookiesExist) {\n                return true;\n            } else {\n                console.warn('\u26A0\uFE0F Microsoft Clarity: Cookies nadal nieaktywne po oczekiwaniu');\n                return false;\n            }\n        }\n        \n        console.warn('\u26A0\uFE0F Microsoft Clarity: Niezgodno\u015B\u0107 mi\u0119dzy zgod\u0105 a cookies', {\n            consent: consentStatus,\n            hasCookies: hasClarityCookies\n        });\n        return false;\n        \n    } catch(e) {\n        console.error('\u274C Microsoft Clarity: B\u0142\u0105d walidacji zgody:', e);\n        return false;\n    }\n}\n\n// Automatyczne \u0142adowanie tracker\u00F3w przy starcie strony, je\u015Bli zgoda zosta\u0142a ju\u017C udzielona (nawet bez widocznego popupu)\n(function() {\n    try {\n        const consent = CookieManager.getConsentStatus();\n        if (consent === 'accepted') {\n            loadTrackingScripts();\n        }\n    } catch (_) {}\n})();\n\n// Funkcja zapobiegaj\u0105ca polskim sierotkom\nfunction fixPolishOrphans(text) {\n    if (!text || typeof text !== 'string') return text;\n\n    // Lista tylko najkr\u00F3tszych polskich sp\u00F3jnik\u00F3w i przyimk\u00F3w (1-2 litery)\n    // Ograniczamy do najpopularniejszych, aby nie zak\u0142\u00F3ca\u0107 naturalnego zawijania tekstu\n    const orphans = ['i', 'a', 'o', 'u', 'w', 'z'];\n\n    let result = text;\n\n    // Dla ka\u017Cdego sp\u00F3jnika/przyimka zast\u0105p spacj\u0119 po nim na &nbsp;\n    orphans.forEach(orphan => {\n        // Wzorzec: pocz\u0105tek s\u0142owa lub spacja + sp\u00F3jnik + spacja + nast\u0119pny znak (nie bia\u0142y)\n        const regex = new RegExp(`(^|\\\\s)(${orphan})\\\\s+(?=\\\\S)`, 'gi');\n        result = result.replace(regex, `$1$2&nbsp;`);\n    });\n\n    return result;\n}\n\n// Zamie\u0144 \u015Bcie\u017Cki wzgl\u0119dne na root-relative, aby dzia\u0142a\u0142y przy \"\u0142adnych\" URL-ach\nfunction toRootPath(path) {\n    if (!path) return '/images/placeholder.webp';\n    try {\n        if (path.startsWith('http://') || path.startsWith('https://') || path.startsWith('/')) return path;\n        return '/' + path.replace(/^\\/+/, '');\n    } catch (_) {\n        return '/images/placeholder.webp';\n    }\n}\n\n// Slug helper: polish diacritics \u2192 ASCII, spaces \u2192 hyphens\nfunction slugify(input) {\n    if (!input) return '';\n    const map = { '\u0105':'a','\u0107':'c','\u0119':'e','\u0142':'l','\u0144':'n','\u00F3':'o','\u015B':'s','\u017C':'z','\u017A':'z',\n                  '\u0104':'a','\u0106':'c','\u0118':'e','\u0141':'l','\u0143':'n','\u00D3':'o','\u015A':'s','\u017B':'z','\u0179':'z' };\n    const replaced = String(input).split('').map(ch => map[ch] || ch).join('');\n    return replaced.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/-+/g,'-').replace(/^-|-$/g,'');\n}\n\nfunction buildPrettyPath(categoryName, subcategoryName, toolId) {\n    const parts = ['','narzedzia'];\n    if (categoryName) parts.push(slugify(categoryName));\n    if (subcategoryName) parts.push(slugify(subcategoryName));\n    if (toolId) parts.push(encodeURIComponent(toolId));\n    return parts.join('/') + '/';  // Always include trailing slash for consistency with sitemap and canonical URLs\n}\n\nfunction resolveCategory(toolCatalog, input) {\n    if (!toolCatalog || !input) return null;\n    return toolCatalog.find(c => c.category === input || slugify(c.category) === input) || null;\n}\n\nfunction resolveSubcategory(category, input) {\n    if (!category || !input) return null;\n    return (category.subcategories || []).find(s => s.name === input || slugify(s.name) === input) || null;\n}\n\n// Odczyt parametr\u00F3w trasy z query lub z '\u0142adnej' \u015Bcie\u017Cki\nfunction getRouteParams() {\n    try {\n        const params = new URLSearchParams(window.location.search);\n        let category = params.get('category');\n        let subcategory = params.get('subcategory');\n        let toolId = params.get('toolId');\n\n        if (!category && !subcategory && !toolId) {\n            const parts = decodeURIComponent(window.location.pathname).split('/').filter(Boolean);\n            // Obs\u0142uga prefiksu /narzedzia w \u0142adnych URL-ach\n            const isPretty = parts[0] === 'narzedzia';\n            const base = isPretty ? parts.slice(1) : parts;\n            if (base.length >= 1) category = base[0];\n            if (base.length >= 2) subcategory = base[1];\n            if (base.length >= 3) toolId = base[2];\n        }\n\n        return { category, subcategory, toolId };\n    } catch (_) {\n        return { category: null, subcategory: null, toolId: null };\n    }\n}\n\n// Czy mo\u017Cemy bezpiecznie u\u017Cywa\u0107 \u0142adnych \u015Bcie\u017Cek (bez query) w pasku adresu?\nfunction canUsePrettyUrls() {\n    try {\n        const { protocol, hostname } = window.location;\n        if (protocol === 'file:') return false;\n        if (!hostname) return false;\n        if (hostname === 'localhost' || hostname === '127.0.0.1' || hostname.startsWith('192.168.')) return false;\n        return hostname === 'toolshare.com.pl' || hostname === 'www.toolshare.com.pl';\n    } catch (_) {\n        return false;\n    }\n}\n\nasync function fetchData() {\n    try {\n        const response = await fetch('/data.json');\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        console.error(\"Nie uda\u0142o si\u0119 pobra\u0107 danych narz\u0119dzi:\", error);\n        return []; // Zwr\u00F3\u0107 pust\u0105 tablic\u0119 w przypadku b\u0142\u0119du\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n    // Determine if this page needs the catalog\n    const needsCatalog = !!(\n        document.getElementById('why-us') ||\n        document.getElementById('category-title') ||\n        document.getElementById('subcategory-title') ||\n        document.getElementById('tool-details-section')\n    );\n\n    const toolCatalog = needsCatalog ? await fetchData() : null;\n\n    // Router oparty na unikalnych elementach strony\n    if (document.getElementById('why-us')) {\n        if (toolCatalog && toolCatalog.length) {\n            renderCategories(toolCatalog);\n        }\n        initScrollAnimations(toolCatalog);\n    } else if (document.getElementById('category-title')) {\n        if (toolCatalog && toolCatalog.length) {\n            renderSubcategories(toolCatalog);\n        }\n    } else if (document.getElementById('subcategory-title')) {\n        if (toolCatalog && toolCatalog.length) {\n            renderTools(toolCatalog);\n        }\n    } else if (document.getElementById('tool-details-section')) {\n        if (toolCatalog && toolCatalog.length) {\n            renderToolDetails(toolCatalog);\n            initializeSeeAlso(toolCatalog);\n        }\n    } else if (document.getElementById('about-us-title')) {\n        // Strona \"O nas\" nie wymaga specjalnego renderowania\n    } else {\n    }\n\n    // Nawigacja i UI, kt\u00F3re mog\u0105 dzia\u0142a\u0107 bez katalogu\n    if (toolCatalog && toolCatalog.length) {\n        renderNavigationCategories(toolCatalog);\n        initializeDropdown(toolCatalog);\n        initializeMobileMenu(toolCatalog);\n        initializeSearch(toolCatalog);\n    }\n    initializeThemeSwitcher();\n    initializeSeoManager(toolCatalog);\n    initScrollAnimations();\n    initializeContactEventTracking();\n    normalizeFooterCopyright();\n\n    // Zastosuj zasady typografii po wszystkich inicjalizacjach\n    setTimeout(() => {\n        applyTypographyRules();\n        applyPolishOrphansToStaticContent();\n    }, 100);\n\n    // Logika przycisku przewijania do g\u00F3ry z u\u017Cyciem GSAP\n    const scrollToTopBtn = document.getElementById('scrollToTopBtn');\n    let isButtonVisible = false;\n    let isAnimating = false; // Flaga do blokowania animacji\n\n    if (scrollToTopBtn) {\n        window.addEventListener('scroll', debounce(() => {\n            if (window.scrollY > 200) {\n                if (!isButtonVisible && !isAnimating) {\n                    isButtonVisible = true;\n                    showButtonEffect();\n                }\n            } else {\n                if (isButtonVisible && !isAnimating) {\n                    isButtonVisible = false;\n                    jumpOutEffect();\n                }\n            }\n        }, 50));\n\n        scrollToTopBtn.addEventListener('click', (e) => {\n            e.preventDefault();\n            window.scrollTo({\n                top: 0,\n                behavior: 'smooth'\n            });\n        });\n    }\n\n    function showButtonEffect() {\n        isAnimating = true;\n        gsap.set(scrollToTopBtn, { display: 'flex', y: 50, opacity: 0, scale: 0.8, x: 0, rotation: 0 });\n        gsap.to(scrollToTopBtn, {\n            y: 0,\n            opacity: 1,\n            scale: 1,\n            duration: 0.5,\n            ease: 'back.out(1.7)',\n            onComplete: () => { isAnimating = false; }\n        });\n    }\n\n    function jumpOutEffect() {\n        isAnimating = true;\n        gsap.to(scrollToTopBtn, {\n            opacity: 0,\n            duration: 0.4,\n            ease: 'power2.out',\n            onComplete: () => {\n                gsap.set(scrollToTopBtn, { display: 'none' });\n                isAnimating = false;\n            }\n        });\n    }\n\n    // P\u0142ynne przewijanie dla przycisku \"Start\"\n    const startLink = document.getElementById('start-link');\n    if (startLink) {\n        startLink.addEventListener('click', (e) => {\n            const isHome = !!document.getElementById('why-us');\n            if (isHome) {\n                // Tylko na stronie g\u0142\u00F3wnej nadpisujemy zachowanie dla p\u0142ynnego scrollu\n                e.preventDefault();\n                window.scrollTo({ top: 0, behavior: 'smooth' });\n            } else {\n                // Na podstronach pozwalamy przegl\u0105darce wykona\u0107 domy\u015Bln\u0105 nawigacj\u0119 (href=\"/\")\n                // e.preventDefault() tutaj nie jest wywo\u0142ywane, by unikn\u0105\u0107 pozostania w katalogu.\n            }\n        });\n    }\n});\n\n// ===== Meta Pixel: Contact event tracking =====\nfunction trackContactEvent(source) {\n    try {\n        const consent = CookieManager.getConsentStatus();\n        if (consent !== 'accepted') return;\n        if (typeof window.fbq === 'undefined') return;\n        const params = source ? { content_name: source } : undefined;\n        window.fbq('track', 'Contact', params);\n    } catch (_) {}\n}\n\nfunction initializeContactEventTracking() {\n    try {\n        // Event delegation - single listener on document root\n        document.addEventListener('click', (event) => {\n            const el = event.target.closest('a[href^=\"tel:\"], a[href^=\"mailto:\"], a[href*=\"#contact\"], #call-button, .phone-option');\n            \n            if (!el) return;\n            \n            // Determine event source based on element properties\n            const href = el.getAttribute('href') || '';\n            let source = 'contact';\n            \n            if (href.startsWith('tel:')) {\n                source = `tel:${href.replace('tel:', '')}`;\n            } else if (href.startsWith('mailto:')) {\n                source = `mailto:${href.replace('mailto:', '')}`;\n            } else if (href.includes('#contact')) {\n                source = 'contact_section_link';\n            } else if (el.id === 'call-button') {\n                source = 'open_phone_modal';\n            } else if (el.classList?.contains('phone-option')) {\n                source = 'phone_option';\n            }\n            \n            trackContactEvent(source);\n        }, { passive: true });\n        \n    } catch (e) {\n        console.warn('\u26A0\uFE0F Failed to initialize contact event tracking:', e.message);\n    }\n}\n\nfunction applyTypographyRules() {\n    // Rozszerzona lista selektor\u00F3w obejmuj\u0105ca elementy menu\n    const selectors = '.feature-card p, .tool-info-container p, .hero-section p, .mobile-menu-link, .dropdown-content a, .sub-dropdown-content a, .breadcrumb span, .category-card-title h3, .tool-card-title h3, .subcategory-card h3';\n    const elements = document.querySelectorAll(selectors);\n    const conjunctions = ['i', 'a', 'w', 'z', 'o', 'u', 'oraz', 'albo', 'ale', 'aby', 'gdy', '\u017Ce', 'za', 'ze', 'do', 'na', 'po', 'bo', 'a\u017C', 'by', 'czy', 'gdy\u017C', 'i\u017C', 'jak', 'je\u015Bli', 'ni', 'od', 'pod', 'to', 'bez'];\n\n    const regex = new RegExp(`(^|\\\\s|>)(${conjunctions.join('|')})\\\\s`, 'gi');\n\n    elements.forEach(el => {\n        // Zapisujemy oryginalny HTML, aby unikn\u0105\u0107 wielokrotnego przetwarzania tych samych spacji\n        if (!el.dataset.originalHtml) {\n            el.dataset.originalHtml = el.innerHTML;\n        }\n        el.innerHTML = el.dataset.originalHtml.replace(regex, `$1$2&nbsp;`);\n    });\n}\n\n// Funkcja debounce ograniczaj\u0105ca cz\u0119stotliwo\u015B\u0107 wywo\u0142a\u0144 innej funkcji\nfunction debounce(func, wait = 100) {\n    let timeout;\n    return function(...args) {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(this, args), wait);\n    };\n}\n\nwindow.addEventListener('resize', debounce(applyTypographyRules));\n\n\nfunction initializeMobileMenu(toolCatalog) {\n    const hamburger = document.querySelector('.hamburger');\n    const overlay = document.getElementById('mobile-menu-overlay');\n    const container = document.getElementById('mobile-menu-container');\n    \n    if (!hamburger || !overlay || !container) return;\n\n    // Buforuj elementy DOM dla lepszej wydajno\u015Bci\n    const panels = document.querySelectorAll('.mobile-menu-panel');\n    const mainMenuPanel = document.getElementById('main-menu-panel');\n\n    // Wype\u0142nij kategorie w menu mobilnym\n    populateMobileMenuCategories(toolCatalog);\n\n    // Prze\u0142\u0105czanie menu mobilnego\n    hamburger.addEventListener('click', () => {\n        const isActive = container.classList.contains('active');\n        \n        if (isActive) {\n            closeMobileMenu();\n        } else {\n            openMobileMenu();\n        }\n    });\n\n    // Zamknij menu po klikni\u0119ciu w t\u0142o (overlay)\n    overlay.addEventListener('click', closeMobileMenu);\n\n    // Delegowanie zdarze\u0144 dla lepszej wydajno\u015Bci \u2013 jeden listener na kontenerze\n    container.addEventListener('click', handleContainerClick);\n\n    // Obs\u0142uguj wszystkie klikni\u0119cia w kontenerze za pomoc\u0105 delegowania zdarze\u0144\n    function handleContainerClick(e) {\n        const backButton = e.target.closest('.mobile-menu-back');\n        const submenuLink = e.target.closest('[data-submenu]');\n        const categoryLink = e.target.closest('[data-category]');\n\n        if (backButton) {\n            e.preventDefault();\n            const targetPanel = backButton.getAttribute('data-back') || 'main-menu';\n            showMobileMenuPanel(targetPanel);\n        } else if (submenuLink) {\n            e.preventDefault();\n            const targetPanel = submenuLink.getAttribute('data-submenu');\n            if (targetPanel === 'tools-menu') {\n                populateMobileMenuCategories(toolCatalog);\n            }\n            showMobileMenuPanel(targetPanel);\n        } else if (categoryLink) {\n            e.preventDefault();\n            const categoryName = categoryLink.getAttribute('data-category');\n            const category = toolCatalog.find(cat => cat.category === categoryName);\n            if (category) {\n                populateMobileMenuSubcategories(category);\n                showMobileMenuPanel('category-menu');\n            }\n        }\n    }\n\n    function openMobileMenu() {\n        requestAnimationFrame(() => {\n            hamburger.classList.add('active');\n            overlay.classList.add('active');\n            container.classList.add('active');\n            document.body.style.overflow = 'hidden';\n            \n            // Reset to main menu\n            showMobileMenuPanel('main-menu', false);\n        });\n    }\n\n    function closeMobileMenu() {\n        requestAnimationFrame(() => {\n            hamburger.classList.remove('active');\n            overlay.classList.remove('active');\n            container.classList.remove('active');\n            document.body.style.overflow = '';\n            \n            // Reset all panels after animation\n            setTimeout(() => {\n                if (!container.classList.contains('active')) {\n                    resetMobileMenuPanels();\n                }\n            }, 300);\n        });\n    }\n\n    function showMobileMenuPanel(panelId, animate = true) {\n        const panels = document.querySelectorAll('.mobile-menu-panel');\n        const targetPanel = document.getElementById(panelId + '-panel');\n        \n        if (!targetPanel) return;\n\n        if (animate) {\n            // Ukryj aktualnie aktywny panel\n            panels.forEach(panel => {\n                if (panel.classList.contains('active')) {\n                    panel.classList.remove('active');\n                    panel.classList.add('sliding-out');\n                }\n            });\n\n            // Poka\u017C docelowy panel po kr\u00F3tkiej zw\u0142oce\n            setTimeout(() => {\n                panels.forEach(panel => {\n                    panel.classList.remove('sliding-out');\n                });\n                targetPanel.classList.add('active');\n            }, 150);\n        } else {\n            // Natychmiastowe prze\u0142\u0105czenie bez animacji\n            panels.forEach(panel => {\n                panel.classList.remove('active', 'sliding-out');\n            });\n            targetPanel.classList.add('active');\n        }\n    }\n\n    function resetMobileMenuPanels() {\n        requestAnimationFrame(() => {\n            panels.forEach(panel => {\n                panel.classList.remove('active', 'sliding-out');\n            });\n            if (mainMenuPanel) {\n                mainMenuPanel.classList.add('active');\n            }\n        });\n    }\n}\n\nfunction populateMobileMenuCategories(toolCatalog) {\n    const categoriesList = document.getElementById('tools-categories-list');\n    if (!categoriesList) return;\n\n    // U\u017Cyj DocumentFragment dla lepszej wydajno\u015Bci\n    const fragment = document.createDocumentFragment();\n\n    toolCatalog.forEach(category => {\n        const listItem = document.createElement('li');\n        listItem.className = 'mobile-menu-item';\n        \n        const link = document.createElement('a');\n        link.href = '#';\n        link.className = 'mobile-menu-link has-submenu';\n        link.innerHTML = fixPolishOrphans(stripHtmlTags(category.category));\n        link.setAttribute('data-category', category.category);\n        \n        // Usu\u0144 pojedyncze listenery \u2013 u\u017Cyj delegowania zdarze\u0144\n        \n        listItem.appendChild(link);\n        fragment.appendChild(listItem);\n    });\n    \n    // Single DOM update\n    categoriesList.innerHTML = '';\n    categoriesList.appendChild(fragment);\n    \n    // Use requestAnimationFrame for typography rules\n    requestAnimationFrame(() => {\n        applyTypographyRules();\n    });\n}\n\nfunction populateMobileMenuSubcategories(category) {\n    const subcategoriesList = document.getElementById('category-subcategories-list');\n    const categoryTitle = document.getElementById('category-menu-title');\n    \n    if (!subcategoriesList || !categoryTitle) return;\n\n    categoryTitle.innerHTML = fixPolishOrphans(stripHtmlTags(category.category));\n    subcategoriesList.innerHTML = '';\n\n    category.subcategories.forEach(subcategory => {\n        const listItem = document.createElement('li');\n        listItem.className = 'mobile-menu-item';\n        \n        const link = document.createElement('a');\n        link.href = buildPrettyPath(category.category, subcategory.name);\n        link.className = 'mobile-menu-link';\n        link.innerHTML = fixPolishOrphans(stripHtmlTags(subcategory.name));\n        \n        listItem.appendChild(link);\n        subcategoriesList.appendChild(listItem);\n    });\n    \n    // Zastosuj zasady typografii po stworzeniu podmenu\n    setTimeout(() => {\n        applyTypographyRules();\n    }, 50);\n}\n\nfunction showMobileMenuPanel(panelId, animate = true) {\n    const panels = document.querySelectorAll('.mobile-menu-panel');\n    const targetPanel = document.getElementById(panelId + '-panel');\n    \n    if (!targetPanel) return;\n\n    if (animate) {\n        // Ukryj aktualnie aktywny panel\n        panels.forEach(panel => {\n            if (panel.classList.contains('active')) {\n                panel.classList.remove('active');\n                panel.classList.add('sliding-out');\n            }\n        });\n\n        // Poka\u017C docelowy panel po kr\u00F3tkiej zw\u0142oce\n        setTimeout(() => {\n            panels.forEach(panel => {\n                panel.classList.remove('sliding-out');\n            });\n            targetPanel.classList.add('active');\n        }, 150);\n    } else {\n        // Natychmiastowe prze\u0142\u0105czenie bez animacji\n        panels.forEach(panel => {\n            panel.classList.remove('active', 'sliding-out');\n        });\n        targetPanel.classList.add('active');\n    }\n}\n\nfunction renderNavigationCategories(toolCatalog) {\n    const navContainer = document.getElementById('nav-categories');\n    if (!navContainer) return;\n\n    navContainer.innerHTML = ''; // Wyczy\u015B\u0107 kontener\n\n    toolCatalog.forEach(category => {\n        const link = document.createElement('a');\n        link.href = buildPrettyPath(category.category);\n        link.textContent = stripHtmlTags(category.category);\n        link.setAttribute('role', 'menuitem');\n        navContainer.appendChild(link);\n    });\n}\n\nfunction renderCategories(toolCatalog) {\n    const contentGrid = document.getElementById('tools-grid');\n    if (!contentGrid) return;\n\n    contentGrid.innerHTML = '';\n\n    toolCatalog.forEach(category => {\n        const cardLink = document.createElement('a');\n        cardLink.href = buildPrettyPath(category.category);\n        cardLink.className = 'category-card'; \n\n        const imageWrapper = document.createElement('div');\n        imageWrapper.className = 'card-image-wrapper';\n\n        const img = document.createElement('img');\n        img.src = toRootPath(category.image);\n        img.alt = category.category;\n        img.className = 'category-card-img';\n        img.loading = 'lazy';\n        img.width = 300;\n        img.height = 200;\n        img.decoding = 'async';\n\n        imageWrapper.appendChild(img);\n\n        const titleWrapper = document.createElement('div');\n        titleWrapper.className = 'category-card-title';\n        titleWrapper.innerHTML = `<h3>${fixPolishOrphans(stripHtmlTags(category.category))}</h3>`;\n\n        cardLink.appendChild(imageWrapper);\n        cardLink.appendChild(titleWrapper);\n        \n        contentGrid.appendChild(cardLink);\n    });\n}\n\nfunction createInteractiveBreadcrumb(text, linkUrl, siblings, type, parentCategoryForSiblings) {\n    const wrapper = document.createElement('div');\n    wrapper.className = 'breadcrumb-dropdown';\n\n    const link = document.createElement('a');\n    link.href = linkUrl;\n    \n    const textSpan = document.createElement('span');\n    textSpan.innerHTML = fixPolishOrphans(text);\n    link.appendChild(textSpan);\n    \n    const arrow = document.createElement('i');\n    arrow.className = 'fas fa-chevron-down breadcrumb-arrow';\n    link.appendChild(arrow);\n    wrapper.appendChild(link);\n\n    if (siblings && siblings.length > 0) {\n        const dropdownContent = document.createElement('div');\n        dropdownContent.className = 'breadcrumb-dropdown-content';\n        siblings.forEach(sibling => {\n            const siblingLink = document.createElement('a');\n            if (type === 'category') {\n                siblingLink.href = buildPrettyPath(sibling.category);\n                siblingLink.textContent = sibling.category;\n            } else if (type === 'subcategory') {\n                siblingLink.href = buildPrettyPath(parentCategoryForSiblings, sibling.name);\n                siblingLink.textContent = sibling.name;\n            }\n            dropdownContent.appendChild(siblingLink);\n        });\n        wrapper.appendChild(dropdownContent);\n    }\n    \n    return wrapper;\n}\n\nfunction createSeparator() {\n    const separator = document.createElement('span');\n    separator.className = 'separator';\n    separator.textContent = '>';\n    return separator;\n}\n\nfunction renderSubcategories(toolCatalog) {\n    document.body.classList.add('subpage');\n    const { category: categoryParam } = getRouteParams();\n    const contentGrid = document.getElementById('subcategory-grid');\n    const titleElement = document.getElementById('category-title');\n    const breadcrumbContainer = document.querySelector('.breadcrumb');\n\n    if (!categoryParam || !contentGrid || !titleElement || !breadcrumbContainer) return;\n\n    const category = resolveCategory(toolCatalog, categoryParam);\n    if (!category) {\n        contentGrid.innerHTML = '<p>Kategoria nie zosta\u0142a znaleziona.</p>';\n        return;\n    }\n\n    titleElement.innerHTML = fixPolishOrphans(stripHtmlTags(category.category));\n\n    // U\u0142adnij adres URL w pasku adresu dla SEO/UX (bez query string)\n    try {\n        if (canUsePrettyUrls()) {\n            const prettyPath = buildPrettyPath(category.category);\n            // Normalizuj current path - zawsze ze slashem dla poprawnego por\u00F3wnania\n            const currentPath = window.location.pathname.endsWith('/')\n                ? window.location.pathname\n                : window.location.pathname + '/';\n            // Tylko nadpisz URL je\u015Bli faktycznie si\u0119 r\u00F3\u017Cni (zapobiega konfliktom z redirectem 301)\n            if (currentPath !== prettyPath) {\n                history.replaceState(null, '', prettyPath);\n            }\n        }\n    } catch (_) {}\n    \n    // Renderowanie nawigacji okruszkowej (breadcrumb)\n    breadcrumbContainer.innerHTML = '';\n    const homeLink = document.createElement('a');\n    homeLink.href = '/';\n    homeLink.textContent = 'Strona g\u0142\u00F3wna';\n    breadcrumbContainer.appendChild(homeLink);\n    breadcrumbContainer.appendChild(createSeparator());\n\n    const categorySpan = document.createElement('span');\n    categorySpan.innerHTML = fixPolishOrphans(stripHtmlTags(category.category));\n    breadcrumbContainer.appendChild(categorySpan);\n\n    // Zawarto\u015B\u0107 strony\n    contentGrid.innerHTML = '';\n    category.subcategories.forEach(sub => {\n        const cardLink = document.createElement('a');\n        cardLink.href = buildPrettyPath(category.category, sub.name);\n        cardLink.className = 'subcategory-card'; \n        cardLink.innerHTML = `<h3>${fixPolishOrphans(stripHtmlTags(sub.name))}</h3>`;\n        contentGrid.appendChild(cardLink);\n    });\n    \n}\n\nfunction renderTools(toolCatalog) {\n    document.body.classList.add('subpage');\n    const { category: categoryParam2, subcategory: subcategoryParam2 } = getRouteParams();\n\n    const contentGrid = document.getElementById('tools-grid');\n    const titleElement = document.getElementById('subcategory-title');\n    const breadcrumbContainer = document.querySelector('.breadcrumb');\n\n    if (!categoryParam2 || !subcategoryParam2 || !contentGrid || !titleElement || !breadcrumbContainer) return;\n\n    const category = resolveCategory(toolCatalog, categoryParam2);\n    const subcategory = category ? resolveSubcategory(category, subcategoryParam2) : null;\n\n    if (!subcategory) {\n        contentGrid.innerHTML = '<p>Podkategoria nie zosta\u0142a znaleziona.</p>';\n        return;\n    }\n\n    titleElement.innerHTML = fixPolishOrphans(stripHtmlTags(subcategory.name));\n\n    // U\u0142adnij adres URL w pasku adresu (kategoria/podkategoria)\n    try {\n        if (canUsePrettyUrls()) {\n            const prettyPath = buildPrettyPath(category.category, subcategory.name);\n            // Normalizuj current path - zawsze ze slashem dla poprawnego por\u00F3wnania\n            const currentPath = window.location.pathname.endsWith('/')\n                ? window.location.pathname\n                : window.location.pathname + '/';\n            // Tylko nadpisz URL je\u015Bli faktycznie si\u0119 r\u00F3\u017Cni (zapobiega konfliktom z redirectem 301)\n            if (currentPath !== prettyPath) {\n                history.replaceState(null, '', prettyPath);\n            }\n        }\n    } catch (_) {}\n\n    // Renderowanie nawigacji okruszkowej (breadcrumb)\n    breadcrumbContainer.innerHTML = '';\n    const homeLink = document.createElement('a');\n    homeLink.href = '/';\n    homeLink.textContent = 'Strona g\u0142\u00F3wna';\n    breadcrumbContainer.appendChild(homeLink);\n    breadcrumbContainer.appendChild(createSeparator());\n    \n    const categorySiblings = toolCatalog.filter(c => c.category !== category.category);\n    const categoryCrumb = createInteractiveBreadcrumb(stripHtmlTags(category.category), buildPrettyPath(category.category), categorySiblings, 'category');\n    breadcrumbContainer.appendChild(categoryCrumb);\n    breadcrumbContainer.appendChild(createSeparator());\n\n    const subcategorySpan = document.createElement('span');\n    subcategorySpan.innerHTML = fixPolishOrphans(stripHtmlTags(subcategory.name));\n    breadcrumbContainer.appendChild(subcategorySpan);\n\n    // Zawarto\u015B\u0107 strony\n    contentGrid.innerHTML = '';\n    const enabledTools = subcategory.tools.filter(tool => tool.enabled !== false);\n\n    if (enabledTools.length === 0) {\n        contentGrid.innerHTML = '<p>Brak narz\u0119dzi w tej podkategorii.</p>';\n        return;\n    }\n\n    enabledTools.forEach(tool => {\n        const toolCard = document.createElement('a');\n        toolCard.className = 'tool-card';\n        toolCard.href = buildPrettyPath(category.category, subcategory.name, tool.id);\n\n        const imageWrapper = document.createElement('div');\n        imageWrapper.className = 'card-image-wrapper';\n\n        const img = document.createElement('img');\n        img.src = toRootPath(tool.image);\n        img.alt = tool.name;\n        img.className = 'tool-card-img';\n        img.loading = 'lazy';\n        img.width = 300;\n        img.height = 200;\n        img.decoding = 'async';\n\n        imageWrapper.appendChild(img);\n\n        const titleWrapper = document.createElement('div');\n        titleWrapper.className = 'tool-card-title';\n        titleWrapper.innerHTML = `<h3>${fixPolishOrphans(tool.name)}</h3>`;\n\n        toolCard.appendChild(imageWrapper);\n        toolCard.appendChild(titleWrapper);\n        contentGrid.appendChild(toolCard);\n    });\n    \n}\n\nfunction renderToolDetails(toolCatalog) {\n    document.body.classList.add('subpage');\n    const { toolId } = getRouteParams();\n\n    if (!toolId) return;\n\n    let tool, category, subcategory;\n    // Znajd\u017A narz\u0119dzie, jego kategori\u0119 i podkategori\u0119\n    for (const cat of toolCatalog) {\n        for (const sub of cat.subcategories) {\n            // Filter out disabled tools before searching\n            const foundTool = sub.tools.filter(t => t.enabled !== false).find(t => t.id === toolId);\n            if (foundTool) {\n                tool = foundTool;\n                category = cat;\n                subcategory = sub;\n                break;\n            }\n        }\n        if (tool) break;\n    }\n\n    const breadcrumbContainer = document.querySelector('.breadcrumb');\n    if (!tool || !breadcrumbContainer) {\n        const content = document.getElementById('tool-details-content');\n        if (content) content.innerHTML = '<p>Narz\u0119dzie nie zosta\u0142o znalezione.</p>';\n        return;\n    }\n\n    // U\u0142adnij adres URL w pasku adresu (kategoria/podkategoria/narz\u0119dzie)\n    try {\n        if (canUsePrettyUrls()) {\n            const prettyPath = buildPrettyPath(category.category, subcategory.name, tool.id);\n            // Normalizuj current path - zawsze ze slashem dla poprawnego por\u00F3wnania\n            const currentPath = window.location.pathname.endsWith('/')\n                ? window.location.pathname\n                : window.location.pathname + '/';\n            // Tylko nadpisz URL je\u015Bli faktycznie si\u0119 r\u00F3\u017Cni (zapobiega konfliktom z redirectem 301)\n            if (currentPath !== prettyPath) {\n                history.replaceState(null, '', prettyPath);\n            }\n        }\n    } catch (_) {}\n\n    // Renderowanie nawigacji okruszkowej (breadcrumb)\n    breadcrumbContainer.innerHTML = '';\n    const homeLink = document.createElement('a');\n    homeLink.href = '/';\n    homeLink.textContent = 'Strona g\u0142\u00F3wna';\n    breadcrumbContainer.appendChild(homeLink);\n    breadcrumbContainer.appendChild(createSeparator());\n\n    const categorySiblings = toolCatalog.filter(c => c.category !== category.category);\n    const categoryCrumb = createInteractiveBreadcrumb(stripHtmlTags(category.category), buildPrettyPath(category.category), categorySiblings, 'category');\n    breadcrumbContainer.appendChild(categoryCrumb);\n    breadcrumbContainer.appendChild(createSeparator());\n    \n    const subcategorySiblings = category.subcategories.filter(s => s.name !== subcategory.name);\n    const subcategoryCrumb = createInteractiveBreadcrumb(stripHtmlTags(subcategory.name), buildPrettyPath(category.category, subcategory.name), subcategorySiblings, 'subcategory', category.category);\n    breadcrumbContainer.appendChild(subcategoryCrumb);\n    breadcrumbContainer.appendChild(createSeparator());\n\n    const toolSpan = document.createElement('span');\n    toolSpan.innerHTML = fixPolishOrphans(tool.name);\n    breadcrumbContainer.appendChild(toolSpan);\n\n    // Uzupe\u0142nij dane na stronie\n    document.title = `${tool.name} - ToolShare`;\n    document.getElementById('tool-name').textContent = tool.name;\n\n    const descriptionElement = document.getElementById('tool-description');\n    if (descriptionElement) {\n        descriptionElement.textContent = tool.description;\n    }\n\n    const imageElement = document.getElementById('tool-image');\n    imageElement.src = toRootPath(tool.image);\n    imageElement.alt = tool.name;\n    imageElement.width = 800;\n    imageElement.height = 600;\n    imageElement.loading = 'eager';\n    imageElement.decoding = 'async';\n\n    // Uzupe\u0142nij tabel\u0119 z cennikiem\n    const pricingTableBody = document.querySelector('#pricing-table tbody');\n    pricingTableBody.innerHTML = '';\n    for (const [period, price] of Object.entries(tool.pricing)) {\n        if (period.toLowerCase().includes('kaucja')) {\n            continue; // Pomijamy wpisy z kluczem zawieraj\u0105cym \"kaucja\"\n        }\n        const row = document.createElement('tr');\n        const periodCell = document.createElement('td');\n        const priceCell = document.createElement('td');\n        \n        periodCell.textContent = period;\n        \n        // Poprawka do obs\u0142ugi placeholder\u00F3w\n        if (typeof price === 'number') {\n            priceCell.textContent = period.toLowerCase().includes('kaucja') ? `${price} z\u0142` : `${price} z\u0142 / dzie\u0144`;\n        } else {\n            priceCell.textContent = price;\n        }\n        \n        row.appendChild(periodCell);\n        row.appendChild(priceCell);\n        pricingTableBody.appendChild(row);\n    }\n\n    // Centralized Deposit row logic\n    const depositKey = Object.keys(tool.pricing).find(p => p.toLowerCase().includes('kaucja'));\n    const depositFromPricing = depositKey ? tool.pricing[depositKey] : undefined;\n\n    if (tool.deposit !== undefined || depositFromPricing !== undefined) {\n        const depositValue = tool.deposit !== undefined ? tool.deposit : depositFromPricing;\n\n        const depositRow = document.createElement('tr');\n        const depositLabelCell = document.createElement('td'); // Zmiana z 'th' na 'td'\n        depositLabelCell.innerHTML = 'Kaucja <sup>**</sup>';\n        const depositValueCell = document.createElement('td');\n        \n        if (typeof depositValue === 'number') {\n            depositValueCell.textContent = `${depositValue} z\u0142`;\n        } else {\n            depositValueCell.textContent = depositValue;\n        }\n        \n        depositRow.appendChild(depositLabelCell);\n        depositRow.appendChild(depositValueCell);\n        pricingTableBody.appendChild(depositRow);\n    }\n}\n\nfunction initializeDropdown(toolCatalog) {\n    const navCategories = document.getElementById('nav-categories');\n    if (!navCategories) return;\n\n    navCategories.innerHTML = ''; \n\n    toolCatalog.forEach(category => {\n        // Kontener dla kategorii i jej podmenu\n        const subDropdownContainer = document.createElement('div');\n        subDropdownContainer.className = 'sub-dropdown';\n\n        // Link g\u0142\u00F3wny kategorii\n        const categoryLink = document.createElement('a');\n        categoryLink.href = buildPrettyPath(category.category);\n        categoryLink.innerHTML = `\n            ${fixPolishOrphans(stripHtmlTags(category.category))}\n            <i class=\"fas fa-chevron-right\" style=\"font-size: 0.8em;\"></i>\n        `;\n        \n        subDropdownContainer.appendChild(categoryLink);\n\n        // Rozwijane menu z podkategoriami\n        const subDropdownContent = document.createElement('div');\n        subDropdownContent.className = 'sub-dropdown-content';\n        \n        category.subcategories.forEach(subcategory => {\n            const subcategoryLink = document.createElement('a');\n            subcategoryLink.href = buildPrettyPath(category.category, subcategory.name);\n            subcategoryLink.innerHTML = fixPolishOrphans(stripHtmlTags(subcategory.name));\n            subDropdownContent.appendChild(subcategoryLink);\n        });\n\n        if (category.subcategories.length > 0) {\n            subDropdownContainer.appendChild(subDropdownContent);\n        }\n\n        navCategories.appendChild(subDropdownContainer);\n    });\n    \n    // Zastosuj zasady typografii po stworzeniu dropdown menu\n    setTimeout(() => {\n        applyTypographyRules();\n        // Limituj widoczne elementy submenu do 12 i dodaj scroll\n        setupSubmenuScrollLimit(12);\n    }, 50);\n}\n\n// ===== Footer copyright normalize (remove hardcoded year) =====\nfunction normalizeFooterCopyright() {\n    try {\n        const nodes = document.querySelectorAll('.footer .footer-info p');\n        nodes.forEach(p => {\n            const txt = (p.textContent || '').trim();\n            if (txt.includes('ToolShare - wypo\u017Cyczalnia narz\u0119dzi')) {\n                p.innerHTML = '&copy; ToolShare - wypo\u017Cyczalnia narz\u0119dzi';\n            }\n        });\n    } catch (_) {}\n}\n\n\n// Usuni\u0119to pust\u0105 funkcj\u0119 zgodno\u015Bci initializeHamburger \u2013 logik\u0119 obs\u0142uguje initializeMobileMenu\n\nfunction initializeThemeSwitcher() {\n    const themeToggle = document.getElementById('theme-toggle');\n    if (!themeToggle) return;\n\n    const currentTheme = localStorage.getItem('theme') || \n                         (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');\n    \n    document.documentElement.setAttribute('data-theme', currentTheme);\n\n    themeToggle.addEventListener('click', () => {\n        let newTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';\n        document.documentElement.setAttribute('data-theme', newTheme);\n        localStorage.setItem('theme', newTheme);\n    });\n}\n\nfunction initializeSeoManager(toolCatalog) {\n    try {\n        const setMetaRobots = (value) => {\n            upsertMetaByName('robots', value);\n        };\n        const url = new URL(window.location.href);\n        const isCategoryPage = !!document.getElementById('category-title');\n        const isSubcategoryPage = !!document.getElementById('subcategory-title');\n        const isToolPage = !!document.getElementById('tool-details-section');\n        const isHomePage = !!document.getElementById('why-us');\n        const canonicalEl = document.querySelector('link[rel=\"canonical\"]');\n        const canonicalHref = canonicalEl?.getAttribute('href') || '';\n        const normalizedPath = window.location.pathname\n            .replace(/index\\.html$/, '')\n            .replace(/\\/$/, '') || '/';\n        const canonicalLooksPretty = canonicalHref && !canonicalHref.endsWith('.html');\n        const canonicalMatchesPath = canonicalLooksPretty && canonicalHref.includes(normalizedPath);\n        const hydrationRequired = !canonicalMatchesPath;\n\n        if (isHomePage && hydrationRequired) {\n            ensureOgTwitterDefaults('https://toolshare.com.pl/images/logo.webp');\n            updateCanonical('https://toolshare.com.pl/');\n            upsertMetaByProperty('og:type', 'website');\n            setMetaRobots('index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1');\n        }\n\n        if (!toolCatalog || !toolCatalog.length) {\n            return;\n        }\n\n        if (isCategoryPage && hydrationRequired) {\n            // Domy\u015Blnie nie indeksuj dop\u00F3ki parametry niepoprawne\n            setMetaRobots('noindex, follow');\n            let categoryName = new URLSearchParams(url.search).get('category');\n            if (!categoryName) {\n                const parts = decodeURIComponent(window.location.pathname).split('/').filter(Boolean);\n                if (parts[0] === 'narzedzia') categoryName = parts[1]; else categoryName = parts[0];\n            }\n            const category = resolveCategory(toolCatalog, categoryName);\n            if (!category) return;\n\n            const pageUrl = `https://toolshare.com.pl/${buildPrettyPath(category.category)}`;\n            const description = `${stripHtmlTags(category.category)} do wypo\u017Cyczenia w gminie Czernica (Chrz\u0105stawa Wielka). Atrakcyjne ceny i elastyczne godziny odbioru.`;\n            const dynamicTitle = `${stripHtmlTags(category.category)} \u2013 wypo\u017Cyczalnia narz\u0119dzi Chrz\u0105stawa Wielka | ToolShare`;\n\n            // Tytu\u0142 i meta tagi\n            if (document.title) {\n                document.title = dynamicTitle;\n            }\n            upsertMetaByName('description', description);\n            ensureOgTwitterDefaults('https://toolshare.com.pl/images/logo.webp');\n            upsertMetaByProperty('og:type', 'website');\n            upsertMetaByProperty('og:title', dynamicTitle);\n            upsertMetaByProperty('og:description', description);\n            upsertMetaByProperty('og:url', pageUrl);\n            upsertMetaByName('twitter:title', dynamicTitle);\n            upsertMetaByName('twitter:description', description);\n            upsertMetaByName('twitter:image', 'https://toolshare.com.pl/images/logo.webp');\n            updateCanonical(pageUrl);\n            setMetaRobots('index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1');\n\n            const breadcrumbItems = [\n                { name: 'Strona g\u0142\u00F3wna', url: 'https://toolshare.com.pl/' },\n                { name: stripHtmlTags(category.category), url: pageUrl }\n            ];\n            if (!hasJsonLdType('BreadcrumbList')) {\n                injectJsonLd(buildBreadcrumbList(breadcrumbItems));\n            }\n\n            const itemList = buildItemList(\n                category.subcategories.map(sub => ({\n                    name: stripHtmlTags(sub.name),\n                    url: `https://toolshare.com.pl/${buildPrettyPath(category.category, sub.name)}`\n                })),\n                pageUrl\n            );\n            injectJsonLd(itemList);\n        }\n\n        if (isSubcategoryPage && hydrationRequired) {\n            // Domy\u015Blnie nie indeksuj dop\u00F3ki parametry niepoprawne\n            setMetaRobots('noindex, follow');\n            let categoryName, subcategoryName;\n            {\n                const params = new URLSearchParams(url.search);\n                categoryName = params.get('category');\n                subcategoryName = params.get('subcategory');\n                if (!categoryName || !subcategoryName) {\n                    const parts = decodeURIComponent(window.location.pathname).split('/').filter(Boolean);\n                    if (parts[0] === 'narzedzia') {\n                        if (!categoryName && parts.length >= 2) categoryName = parts[1];\n                        if (!subcategoryName && parts.length >= 3) subcategoryName = parts[2];\n                    } else {\n                        if (!categoryName && parts.length >= 1) categoryName = parts[0];\n                        if (!subcategoryName && parts.length >= 2) subcategoryName = parts[1];\n                    }\n                }\n            }\n            const category = resolveCategory(toolCatalog, categoryName);\n            const subcategory = category ? resolveSubcategory(category, subcategoryName) : null;\n            if (!subcategory) return;\n\n            const pageUrl = `https://toolshare.com.pl/${buildPrettyPath(category.category, subcategory.name)}`;\n            const description = `${stripHtmlTags(subcategory.name)} do wypo\u017Cyczenia \u2013 gmina Czernica. Odbi\u00F3r w Chrz\u0105stawie Wielkiej, szybki kontakt, szybka obs\u0142uga.`;\n            const dynamicTitle = `${stripHtmlTags(subcategory.name)} \u2013 wypo\u017Cyczalnia narz\u0119dzi Chrz\u0105stawa Wielka | ToolShare`;\n\n            // Tytu\u0142 i meta tagi\n            if (document.title) {\n                document.title = dynamicTitle;\n            }\n            upsertMetaByName('description', description);\n            ensureOgTwitterDefaults('https://toolshare.com.pl/images/logo.webp');\n            upsertMetaByProperty('og:type', 'website');\n            upsertMetaByProperty('og:title', dynamicTitle);\n            upsertMetaByProperty('og:description', description);\n            upsertMetaByProperty('og:url', pageUrl);\n            upsertMetaByName('twitter:title', dynamicTitle);\n            upsertMetaByName('twitter:description', description);\n            upsertMetaByName('twitter:image', 'https://toolshare.com.pl/images/logo.webp');\n            updateCanonical(pageUrl);\n            setMetaRobots('index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1');\n\n            const breadcrumbItems = [\n                { name: 'Strona g\u0142\u00F3wna', url: 'https://toolshare.com.pl/' },\n                { name: stripHtmlTags(category.category), url: `https://toolshare.com.pl/${buildPrettyPath(category.category)}` },\n                { name: stripHtmlTags(subcategory.name), url: pageUrl }\n            ];\n            injectJsonLd(buildBreadcrumbList(breadcrumbItems));\n\n            const enabledTools = (subcategory.tools || []).filter(t => t.enabled !== false);\n            const itemList = buildItemList(\n                enabledTools.map(t => ({\n                    name: stripHtmlTags(t.name),\n                    url: `https://toolshare.com.pl/${buildPrettyPath(category.category, subcategory.name, t.id)}`\n                })),\n                pageUrl\n            );\n            if (!hasJsonLdType('ItemList')) {\n                injectJsonLd(itemList);\n            }\n        }\n\n        if (isToolPage && hydrationRequired) {\n            // Domy\u015Blnie nie indeksuj dop\u00F3ki parametry niepoprawne\n            setMetaRobots('noindex, follow');\n            let toolId = new URLSearchParams(url.search).get('toolId');\n            if (!toolId) {\n                const parts = decodeURIComponent(window.location.pathname).split('/').filter(Boolean);\n                if (parts.length >= 3) toolId = parts[2];\n            }\n            const toolCtx = findToolById(toolId, toolCatalog);\n            const tool = toolCtx?.tool;\n            const category = toolCtx?.category;\n            const subcategory = toolCtx?.subcategory;\n            if (!tool) return;\n\n            const pageUrl = `https://toolshare.com.pl/${buildPrettyPath(category.category, subcategory.name, tool.id)}`;\n            const firstPrice = getFirstNumericPrice(tool?.pricing);\n            const schemaPrice = formatPriceForSchema(firstPrice);\n            const descriptionBase = `${stripHtmlTags(tool.name)} do wypo\u017Cyczenia. ${stripHtmlTags(category.category)} \u203A ${stripHtmlTags(subcategory.name)}. Odbi\u00F3r w Chrz\u0105stawie Wielkiej, elastyczne godziny.`;\n            const description = firstPrice ? `${descriptionBase} Ceny od ${firstPrice} z\u0142/dzie\u0144.` : descriptionBase;\n\n            upsertMetaByName('description', description);\n            ensureOgTwitterDefaults(absoluteUrl(tool.image));\n            upsertMetaByProperty('og:type', 'product');\n            upsertMetaByProperty('og:title', document.title || 'Narz\u0119dzie \u2013 ToolShare');\n            upsertMetaByProperty('og:description', description);\n            upsertMetaByProperty('og:url', pageUrl);\n            upsertMetaByName('twitter:title', document.title || 'Narz\u0119dzie \u2013 ToolShare');\n            upsertMetaByName('twitter:description', description);\n            upsertMetaByName('twitter:image', absoluteUrl(tool.image));\n            updateCanonical(pageUrl);\n\n            // Product JSON-LD\n            try {\n                const offer = {\n                    '@type': 'Offer',\n                    priceCurrency: 'PLN',\n                    availability: 'https://schema.org/InStock',\n                    url: pageUrl\n                };\n                if (schemaPrice !== null) {\n                    offer.price = schemaPrice;\n                }\n\n                const product = {\n                    '@context': 'https://schema.org',\n                    '@type': 'Product',\n                    name: stripHtmlTags(tool.name),\n                    image: [absoluteUrl(tool.image)],\n                    category: `${stripHtmlTags(category.category)} > ${stripHtmlTags(subcategory.name)}`,\n                    url: pageUrl,\n                    offers: offer\n                };\n                if (!hasJsonLdType('Product')) {\n                    injectJsonLd(product);\n                }\n            } catch (_) {}\n\n            setMetaRobots('index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1');\n\n            const breadcrumbItems = [\n                { name: 'Strona g\u0142\u00F3wna', url: 'https://toolshare.com.pl/' },\n                { name: stripHtmlTags(category.category), url: `https://toolshare.com.pl/${buildPrettyPath(category.category)}` },\n                { name: stripHtmlTags(subcategory.name), url: `https://toolshare.com.pl/${buildPrettyPath(category.category, subcategory.name)}` },\n                { name: stripHtmlTags(tool.name), url: pageUrl }\n            ];\n            if (!hasJsonLdType('BreadcrumbList')) {\n                injectJsonLd(buildBreadcrumbList(breadcrumbItems));\n            }\n        }\n\n        if (!hydrationRequired && canonicalEl && canonicalLooksPretty && !canonicalHref.endsWith('/')) {\n            canonicalEl.setAttribute('href', `${canonicalHref}/`);\n        }\n    } catch (_) {}\n}\n\nfunction upsertMetaRobots() {\n    upsertMetaByName('robots', 'index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1');\n}\n\nfunction ensureOgTwitterDefaults(defaultImageUrl) {\n    upsertMetaByProperty('og:site_name', 'ToolShare');\n    upsertMetaByProperty('og:image', defaultImageUrl);\n    upsertMetaByProperty('og:image:width', '1200');\n    upsertMetaByProperty('og:image:height', '630');\n    upsertMetaByName('twitter:card', 'summary_large_image');\n    upsertMetaByName('twitter:image', defaultImageUrl);\n}\n\nfunction upsertMetaTag(attrName, attrValue, content) {\n    if (!attrValue || !content) return;\n    let el = document.head.querySelector(`meta[${attrName}=\"${CSS.escape(attrValue)}\"]`);\n    if (!el) {\n        el = document.createElement('meta');\n        el.setAttribute(attrName, attrValue);\n        document.head.appendChild(el);\n    }\n    el.setAttribute('content', content);\n}\n\nfunction upsertMetaByName(name, content) {\n    return upsertMetaTag('name', name, content);\n}\n\nfunction upsertMetaByProperty(property, content) {\n    return upsertMetaTag('property', property, content);\n}\n\nfunction normalizeCanonicalUrl(url) {\n    try {\n        const canonical = new URL(url, window.location.origin);\n        const path = canonical.pathname || '';\n        const hasExtension = /\\.[a-z0-9]{2,5}$/i.test(path);\n        if (path && !path.endsWith('/') && !hasExtension) {\n            canonical.pathname = `${path}/`;\n        }\n        return canonical.toString();\n    } catch (_) {\n        return url;\n    }\n}\n\nfunction updateCanonical(url) {\n    if (!url) return;\n    const normalized = normalizeCanonicalUrl(url);\n    let link = document.head.querySelector('link[rel=\"canonical\"]');\n    if (!link) {\n        link = document.createElement('link');\n        link.setAttribute('rel', 'canonical');\n        document.head.appendChild(link);\n    }\n    link.setAttribute('href', normalized);\n}\n\nfunction buildBreadcrumbList(items) {\n    return {\n        '@context': 'https://schema.org',\n        '@type': 'BreadcrumbList',\n        'itemListElement': items.map((item, index) => ({\n            '@type': 'ListItem',\n            'position': index + 1,\n            'name': item.name,\n            'item': item.url\n        }))\n    };\n}\n\nfunction buildItemList(entries, pageUrl) {\n    return {\n        '@context': 'https://schema.org',\n        '@type': 'ItemList',\n        'url': pageUrl,\n        'itemListElement': entries.map((entry, index) => ({\n            '@type': 'ListItem',\n            'position': index + 1,\n            'url': entry.url,\n            'name': entry.name\n        }))\n    };\n}\n\nfunction injectJsonLd(object) {\n    if (!object) return;\n    const script = document.createElement('script');\n    script.type = 'application/ld+json';\n    script.text = JSON.stringify(object);\n    document.head.appendChild(script);\n}\n\n// Check if JSON-LD of given @type already exists in the document\nfunction hasJsonLdType(type) {\n    try {\n        const scripts = document.querySelectorAll('script[type=\"application/ld+json\"]');\n        for (const s of scripts) {\n            try {\n                const data = JSON.parse(s.textContent || '{}');\n                const t = data['@type'] || (data['@graph'] && data['@graph'][0] && data['@graph'][0]['@type']);\n                if (!t) continue;\n                if (Array.isArray(t)) {\n                    if (t.includes(type)) return true;\n                } else if (typeof t === 'string' && t.toLowerCase() === type.toLowerCase()) {\n                    return true;\n                }\n            } catch (_) { /* ignore parse errors */ }\n        }\n    } catch (_) {}\n    return false;\n}\n\nfunction absoluteUrl(path) {\n    if (!path) return 'https://toolshare.com.pl/images/logo.webp';\n    try {\n        const u = new URL(path, 'https://toolshare.com.pl/');\n        return u.toString();\n    } catch (_) {\n        return 'https://toolshare.com.pl/images/logo.webp';\n    }\n}\n\nfunction getFirstNumericPrice(pricing) {\n    if (!pricing || typeof pricing !== 'object') return null;\n    const val = Object.values(pricing).find(p => typeof p === 'number');\n    return typeof val === 'number' ? val : null;\n}\n\nfunction formatPriceForSchema(value) {\n    if (typeof value !== 'number' || !Number.isFinite(value)) return null;\n    return Number.isInteger(value) ? String(value) : value.toFixed(2);\n}\n\nfunction getFirstPriceText(pricing) {\n    if (!pricing || typeof pricing !== 'object') return null;\n    for (const [label, value] of Object.entries(pricing)) {\n        if (typeof value === 'string' && !label.toLowerCase().includes('kaucja')) {\n            const trimmed = value.trim();\n            if (trimmed) return trimmed;\n        }\n    }\n    return null;\n}\n\nlet gsapLoaderPromise = null;\nfunction loadGsapLibrary() {\n    if (typeof window === 'undefined') return Promise.resolve(null);\n    if (window.gsap) return Promise.resolve(window.gsap);\n    if (gsapLoaderPromise) return gsapLoaderPromise;\n\n    const scriptUrl = 'https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js';\n    gsapLoaderPromise = new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.src = scriptUrl;\n        script.async = true;\n        script.onload = () => resolve(window.gsap || null);\n        script.onerror = () => reject(new Error('GSAP failed to load'));\n        document.head.appendChild(script);\n    }).catch(() => null);\n\n    return gsapLoaderPromise;\n}\n\nfunction initScrollAnimations() {\n    loadGsapLibrary().then(gsapInstance => {\n        const gsapRef = gsapInstance || window.gsap;\n        if (!gsapRef) {\n            return;\n        }\n\n        const allCards = document.querySelectorAll('.feature-card, .category-card, .subcategory-card, .tool-card');\n        const contactItems = document.querySelectorAll('.contact-details, .contact-map');\n        const heroSection = document.querySelector('.hero-section');\n\n        allCards.forEach(card => {\n            card.classList.add('stagger-item');\n            gsapRef.set(card, { opacity: 0, y: 20 });\n        });\n\n        contactItems.forEach(item => {\n            item.classList.add('stagger-item');\n            gsapRef.set(item, { opacity: 0, y: 30 });\n        });\n\n        const observerOptions = {\n            threshold: 0.1,\n            rootMargin: '0px 0px -50px 0px'\n        };\n\n        const observer = new IntersectionObserver((entries, observerRef) => {\n            entries.forEach(entry => {\n                if (!entry.isIntersecting) return;\n\n                const target = entry.target;\n                const items = target.querySelectorAll('.stagger-item');\n                if (items.length > 0) {\n                    gsapRef.to(items, {\n                        opacity: 1,\n                        y: 0,\n                        duration: 1.2,\n                        ease: 'power2.out',\n                        stagger: target.id === 'contact' ? 0.3 : 0\n                    });\n                    items.forEach(item => item.classList.add('animate'));\n                }\n\n                observerRef.unobserve(target);\n            });\n        }, observerOptions);\n\n        document\n            .querySelectorAll('.features-grid, #tools-grid, #subcategory-grid, #contact')\n            .forEach(grid => grid && observer.observe(grid));\n\n        if (heroSection) {\n            const heroElements = [\n                heroSection.querySelector('h1'),\n                heroSection.querySelector('p'),\n                heroSection.querySelector('.btn')\n            ].filter(Boolean);\n\n            gsapRef.fromTo(heroElements, {\n                opacity: 0\n            }, {\n                opacity: 1,\n                color: 'white',\n                duration: 1.5,\n                delay: 0.3,\n                ease: 'power2.out'\n            });\n        }\n    });\n}\n\n\n// Zastosuj fixPolishOrphans do statycznych stron (Regulamin, Polityka Prywatno\u015Bci)\nfunction applyPolishOrphansToStaticContent() {\n    const privacyContent = document.querySelector('.privacy-content');\n    if (!privacyContent) return;\n\n    // Zastosuj do wszystkich akapit\u00F3w i element\u00F3w listy\n    const textElements = privacyContent.querySelectorAll('p, li, h2, h3');\n    textElements.forEach(element => {\n        if (element.textContent && element.children.length === 0) {\n            // Tylko dla element\u00F3w bez zagnie\u017Cd\u017Conych dzieci (czysty tekst)\n            element.innerHTML = fixPolishOrphans(element.textContent);\n        } else if (element.childNodes.length > 0) {\n            // Dla element\u00F3w z mieszan\u0105 tre\u015Bci\u0105 (tekst + linki)\n            element.childNodes.forEach(node => {\n                if (node.nodeType === Node.TEXT_NODE && node.textContent.trim()) {\n                    const span = document.createElement('span');\n                    span.innerHTML = fixPolishOrphans(node.textContent);\n                    node.replaceWith(span);\n                }\n            });\n        }\n    });\n}\n\n// Zastosuj poprawki do wszystkich tytu\u0142\u00F3w po za\u0142adowaniu tre\u015Bci\nfunction applyPolishTypography() {\n    const titles = document.querySelectorAll('.category-card-title h3, .tool-card-title h3, .dropdown-content a, .breadcrumb span:last-of-type, .mobile-menu-link, .mobile-menu-title');\n\n    titles.forEach(title => {\n        if (title.textContent) {\n            title.innerHTML = fixPolishOrphans(title.textContent);\n        }\n    });\n}\n\n// Dodaj obs\u0142ug\u0119 sierotek do istniej\u0105cego kodu inicjalizacyjnego\n// B\u0119dzie wywo\u0142ywane po renderowaniu kart kategorii\nfunction addPolishTypographyToCards() {\n    // Op\u00F3\u017Anienie dla pewno\u015Bci, \u017Ce wszystkie elementy s\u0105 ju\u017C renderowane\n    setTimeout(applyPolishTypography, 100);\n} \n\n// Dodaj funkcj\u0119 pomocnicz\u0105 do usuwania tag\u00F3w HTML z nazw kategorii\nfunction stripHtmlTags(str) {\n    if (!str) return '';\n    const div = document.createElement('div');\n    div.innerHTML = str;\n    return div.textContent || div.innerText || '';\n}\n\nfunction initializeSearch(toolCatalog) {\n    const searchToggle = document.getElementById('search-toggle');\n    const searchContainer = document.getElementById('search-container');\n    const searchInput = document.getElementById('search-input');\n    const searchClose = document.getElementById('search-close');\n    const searchResults = document.getElementById('search-results');\n    \n    if (!searchToggle || !searchContainer || !searchInput || !searchClose || !searchResults) {\n        return;\n    }\n    \n    let isSearchOpen = false;\n    let selectedIndex = -1;\n    let searchResultItems = [];\n    \n    // Funkcje do zarz\u0105dzania histori\u0105 wyszukiwa\u0144\n    function getSearchHistory() {\n        try {\n            const history = localStorage.getItem('toolshare_search_history');\n            return history ? JSON.parse(history) : [];\n        } catch (e) {\n            return [];\n        }\n    }\n    \n    function saveToSearchHistory(query) {\n        if (!query || query.length < 2) return;\n        \n        try {\n            let history = getSearchHistory();\n            \n            // Usu\u0144 je\u015Bli ju\u017C istnieje\n            history = history.filter(item => item.toLowerCase() !== query.toLowerCase());\n            \n            // Dodaj na pocz\u0105tek\n            history.unshift(query);\n            \n            // Ogranicz do 5 ostatnich\n            history = history.slice(0, 5);\n            \n            localStorage.setItem('toolshare_search_history', JSON.stringify(history));\n        } catch (e) {\n            console.error('Error saving search history:', e);\n        }\n    }\n    \n    function clearSearchHistory() {\n        try {\n            localStorage.removeItem('toolshare_search_history');\n            showSearchHistory(); // Od\u015Bwie\u017C widok historii\n        } catch (e) {\n            console.error('Error clearing search history:', e);\n        }\n    }\n    \n    function showSearchHistory() {\n        const history = getSearchHistory();\n        if (history.length === 0) {\n            searchResults.classList.remove('active');\n            return;\n        }\n        \n        searchResults.innerHTML = `\n            <div class=\"search-history-header\">Ostatnio ogl\u0105dane narz\u0119dzia</div>\n            ${history.map(query => `\n                <div class=\"search-history-item\" data-query=\"${escapeHtml(query)}\">\n                    <i class=\"fas fa-tools search-history-icon\"></i>\n                    <span class=\"search-history-text\">${escapeHtml(query)}</span>\n                </div>\n            `).join('')}\n            <div class=\"search-history-footer\">\n                <button class=\"clear-history-btn\">Wyczy\u015B\u0107 histori\u0119</button>\n            </div>\n        `;\n        \n        searchResults.classList.add('active');\n        \n        // Dodaj event listenery do element\u00F3w historii\n        const historyItems = searchResults.querySelectorAll('.search-history-item');\n        historyItems.forEach((item, index) => {\n            item.addEventListener('click', () => {\n                const toolName = item.getAttribute('data-query');\n                searchInput.value = toolName;\n                performSearch(toolName, toolCatalog);\n            });\n            \n            item.addEventListener('mouseenter', () => {\n                selectedIndex = index;\n                updateHistorySelection();\n            });\n        });\n        \n        // Dodaj event listener dla przycisku czyszczenia historii\n        const clearBtn = searchResults.querySelector('.clear-history-btn');\n        if (clearBtn) {\n            clearBtn.addEventListener('click', (e) => {\n                e.stopPropagation(); // Zapobiegnij zamkni\u0119ciu wyszukiwania\n                clearSearchHistory();\n            });\n        }\n        \n        searchResultItems = historyItems;\n        selectedIndex = -1;\n    }\n    \n    function updateHistorySelection() {\n        const historyItems = searchResults.querySelectorAll('.search-history-item');\n        historyItems.forEach((item, index) => {\n            if (index === selectedIndex) {\n                item.classList.add('highlighted');\n            } else {\n                item.classList.remove('highlighted');\n            }\n        });\n    }\n    \n    function escapeHtml(text) {\n        const div = document.createElement('div');\n        div.textContent = text;\n        return div.innerHTML;\n    }\n    \n    // Animacja otwierania wyszukiwania\n    searchToggle.addEventListener('click', () => {\n        if (!isSearchOpen) {\n            openSearch();\n        }\n    });\n    \n    // Zamykanie wyszukiwania\n    searchClose.addEventListener('click', () => {\n        closeSearch();\n    });\n    \n    // Zamykanie przy klikni\u0119ciu Escape\n    document.addEventListener('keydown', (e) => {\n        if (e.key === 'Escape' && isSearchOpen) {\n            closeSearch();\n        }\n        \n        // Nawigacja strza\u0142kami w wynikach\n        if (isSearchOpen && searchResultItems.length > 0) {\n            if (e.key === 'ArrowDown') {\n                e.preventDefault();\n                selectedIndex = Math.min(selectedIndex + 1, searchResultItems.length - 1);\n                updateSelection();\n                updateHistorySelection();\n            } else if (e.key === 'ArrowUp') {\n                e.preventDefault();\n                selectedIndex = Math.max(selectedIndex - 1, -1);\n                updateSelection();\n                updateHistorySelection();\n            } else if (e.key === 'Enter' && selectedIndex >= 0) {\n                e.preventDefault();\n                searchResultItems[selectedIndex].click();\n            }\n        }\n    });\n    \n    // Poka\u017C histori\u0119 przy klikni\u0119ciu w input\n    searchInput.addEventListener('click', () => {\n        if (!searchInput.value.trim()) {\n            showSearchHistory();\n        }\n    });\n    \n    // Wyszukiwanie w czasie rzeczywistym\n    searchInput.addEventListener('input', debounce((e) => {\n        const query = e.target.value.trim();\n\n        if (query.length === 0) {\n            showSearchHistory();\n            return;\n        }\n\n        performSearch(query, toolCatalog);\n    }, 150));\n    \n    function openSearch() {\n        isSearchOpen = true;\n        \n        // Poka\u017C pasek wyszukiwania z CSS transition\n        searchContainer.classList.remove('hidden');\n        searchContainer.classList.add('active');\n        \n        // Focus po zako\u0144czeniu animacji CSS\n        setTimeout(() => {\n            searchInput.focus();\n        }, 300); // 300ms to match CSS transition\n    }\n    \n    function closeSearch() {\n        isSearchOpen = false;\n        selectedIndex = -1;\n        searchInput.value = '';\n        searchResults.classList.remove('active');\n        searchResults.innerHTML = '';\n        \n        // Zamknij pasek z CSS transition\n        searchContainer.classList.remove('active');\n        \n        // Ukryj po zako\u0144czeniu animacji CSS\n        setTimeout(() => {\n            searchContainer.classList.add('hidden');\n        }, 300); // 300ms to match CSS transition\n    }\n    \n    function performSearch(query, toolCatalog) {\n        if (!query || query.length < 2) {\n            searchResults.classList.remove('active');\n            searchResults.innerHTML = '';\n            searchResultItems = [];\n            selectedIndex = -1;\n            return;\n        }\n        \n        const results = [];\n        const queryLower = query.toLowerCase();\n        \n        // Przeszukaj wszystkie narz\u0119dzia\n        toolCatalog.forEach(category => {\n            category.subcategories.forEach(subcategory => {\n                subcategory.tools\n                    .filter(tool => tool.enabled !== false)\n                    .forEach(tool => {\n                        const nameMatch = tool.name.toLowerCase().includes(queryLower);\n                        const descMatch = tool.description && tool.description.toLowerCase().includes(queryLower);\n                        const categoryMatch = category.category.toLowerCase().includes(queryLower);\n                        const subcategoryMatch = subcategory.name.toLowerCase().includes(queryLower);\n                        \n                        if (nameMatch || descMatch || categoryMatch || subcategoryMatch) {\n                            results.push({\n                                tool,\n                                category: category.category,\n                                subcategory: subcategory.name,\n                                matchType: nameMatch ? 'name' : descMatch ? 'description' : 'category'\n                            });\n                        }\n                    });\n            });\n        });\n        \n        displaySearchResults(results, query);\n    }\n    \n    function displaySearchResults(results, query) {\n        if (results.length === 0) {\n            searchResults.innerHTML = '<div class=\"search-no-results\">Nie znaleziono narz\u0119dzi dla tej frazy</div>';\n            searchResults.classList.add('active');\n            searchResultItems = [];\n            selectedIndex = -1;\n            return;\n        }\n        \n        // Sortuj wyniki - najpierw dopasowania w nazwie, potem w opisie, na ko\u0144cu w kategoriach\n        results.sort((a, b) => {\n            const order = { 'name': 0, 'description': 1, 'category': 2 };\n            return order[a.matchType] - order[b.matchType];\n        });\n        \n        searchResults.innerHTML = results.map(result => {\n            const highlightedName = highlightText(result.tool.name, query);\n            return `\n                <div class=\"search-result-item\" data-tool-id=\"${result.tool.id}\">\n                    <img src=\"${result.tool.image}\" alt=\"${result.tool.name}\" class=\"search-result-image\" loading=\"lazy\" width=\"80\" height=\"80\" decoding=\"async\">\n                    <div class=\"search-result-info\">\n                        <div class=\"search-result-title\">${highlightedName}</div>\n                        <div class=\"search-result-category\">${stripHtmlTags(result.category)} \u203A ${stripHtmlTags(result.subcategory)}</div>\n                    </div>\n                </div>\n            `;\n        }).join('');\n        \n        searchResults.classList.add('active');\n        \n        // Dodaj event listenery do wynik\u00F3w\n        searchResultItems = searchResults.querySelectorAll('.search-result-item');\n        searchResultItems.forEach((item, index) => {\n            item.addEventListener('click', () => {\n                const toolId = item.getAttribute('data-tool-id');\n\n                // Znajd\u017A nazw\u0119 narz\u0119dzia i zapisz do historii\n                const toolResult = results.find(r => r.tool.id === toolId);\n                if (toolResult) {\n                    saveToSearchHistory(toolResult.tool.name);\n\n                    // Use pretty URL with trailing slash if available, fallback to query params\n                    if (canUsePrettyUrls()) {\n                        window.location.href = buildPrettyPath(toolResult.category, toolResult.subcategory, toolResult.tool.id);\n                    } else {\n                        window.location.href = `/tool.html?toolId=${toolId}`;\n                    }\n                }\n            });\n            \n            item.addEventListener('mouseenter', () => {\n                selectedIndex = index;\n                updateSelection();\n            });\n        });\n        \n        selectedIndex = -1;\n    }\n    \n    function highlightText(text, query) {\n        if (!query) return text;\n        const regex = new RegExp(`(${escapeRegex(query)})`, 'gi');\n        return text.replace(regex, '<span class=\"search-highlight\">$1</span>');\n    }\n    \n    function escapeRegex(string) {\n        return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    }\n    \n    function updateSelection() {\n        searchResultItems.forEach((item, index) => {\n            if (index === selectedIndex) {\n                item.classList.add('highlighted');\n            } else {\n                item.classList.remove('highlighted');\n            }\n        });\n    }\n}\n\n// Cookie Popup\ndocument.addEventListener('DOMContentLoaded', function() {\n    const cookiePopup = document.getElementById('cookie-popup');\n    if (!cookiePopup) return; // Sprawd\u017A czy element istnieje\n    \n    const acceptBtn = document.getElementById('accept-cookies');\n    const rejectBtn = document.getElementById('reject-cookies');\n\n    // TESTOWANIE: Usu\u0144 t\u0119 lini\u0119 w produkcji\n    // localStorage.removeItem('cookieConsent');\n\n    // U\u017Cywamy globalnych helper\u00F3w trackingowych: loadTrackingScripts()\n\n    // Tryb domy\u015Blny: nic nie \u0142adujemy przed zgod\u0105\n\n    // Sprawd\u017A czy u\u017Cytkownik ju\u017C podj\u0105\u0142 decyzj\u0119\n    const consent = CookieManager.getConsentStatus();\n    if (consent) {\n        cookiePopup.classList.add('hidden');\n        \n        // Je\u015Bli zaakceptowano wcze\u015Bniej \u2013 do\u0142aduj trackery teraz\n        if (consent === 'accepted') {\n            loadTrackingScripts();\n        } else {\n        }\n    } else {\n        // Upewnij si\u0119, \u017Ce popup jest widoczny\n        cookiePopup.style.display = 'block';\n        cookiePopup.classList.remove('hidden');\n    }\n\n    // Funkcja zamykania popup\n    function hidePopup() {\n        cookiePopup.classList.add('hidden');\n        setTimeout(() => {\n            cookiePopup.style.display = 'none';\n        }, 300);\n    }\n\n    // Akceptacja cookies\n    if (acceptBtn) {\n        acceptBtn.addEventListener('click', function() {\n            CookieManager.setConsentStatus('accepted');\n            hidePopup();\n            \n            // Za\u0142aduj i w\u0142\u0105cz trackery po akceptacji\n            loadTrackingScripts();\n        });\n    }\n\n    // Odrzucenie cookies\n    if (rejectBtn) {\n        rejectBtn.addEventListener('click', function() {\n            CookieManager.setConsentStatus('rejected');\n            hidePopup();\n            \n            // Poinformuj Microsoft Clarity o odrzuceniu zgody\n            setClarityConsent(false).catch(e => {\n                console.warn('\u26A0\uFE0F Microsoft Clarity consent denial failed:', e.message);\n            });\n            \n            // Nic nie \u0142adujemy \u2013 pozostaje wy\u0142\u0105czone\n        });\n    }\n    \n    // Obs\u0142uga linku \"Ustawienia cookies\" w stopce\n    const cookieSettingsLink = document.getElementById('cookie-settings-link');\n    if (cookieSettingsLink) {\n        cookieSettingsLink.addEventListener('click', function(e) {\n            e.preventDefault();\n            \n            const currentConsent = CookieManager.getConsentStatus();\n            if (currentConsent === 'accepted') {\n                // Je\u015Bli aktualnie zaakceptowane, cofnij zgod\u0119 przed pokazaniem popup\n                revokeCookieConsent();\n                CookieManager.setConsentStatus('rejected');\n            }\n            \n            showCookieSettings();\n        });\n    }\n});\n\n// ========== ZOBACZ R\u00D3WNIE\u017B FUNCTIONALITY ==========\n\n// Sta\u0142e dla karuzeli \u201EZobacz r\u00F3wnie\u017C\u201D\nconst SEE_ALSO_CONFIG = {\n    MAX_TOOLS: 10,\n    CARD_WIDTH: 225,\n    CARD_GAP: 20,\n    LOADING_DELAY: 200,\n    SCROLL_TOLERANCE: 5,\n    SWIPE_THRESHOLD: 10,\n    SNAP_TIMEOUT: 100,\n    ANIMATION_DURATION: 400\n};\n\n// Pomocnicze: odczytaj rzeczywist\u0105 warto\u015B\u0107 odst\u0119pu (gap) z obliczonych styli (z fallbackiem)\nfunction getCarouselGapPx(track) {\n    try {\n        const style = window.getComputedStyle(track);\n        const gap = parseFloat(style.gap || style.columnGap || style.rowGap || '');\n        return Number.isFinite(gap) ? gap : SEE_ALSO_CONFIG.CARD_GAP;\n    } catch (_) {\n        return SEE_ALSO_CONFIG.CARD_GAP;\n    }\n}\n\nfunction initializeSeeAlso(toolCatalog) {\n    const seeAlsoSection = document.getElementById('zobacz-takze-section');\n    const track = document.getElementById('zobacz-takze-track');\n    if (!seeAlsoSection || !track) return;\n\n    const hasStaticCards = !!track.querySelector('.zobacz-takze-card');\n    if (hasStaticCards) {\n        setupCarouselNavigation();\n        setTimeout(() => applyTypographyRules(), 60);\n        return;\n    }\n\n    const { toolId: currentToolId } = getRouteParams();\n    \n    if (!currentToolId) return;\n\n    try {\n        // Find current tool and its context\n        const currentToolData = findToolById(currentToolId, toolCatalog);\n        if (!currentToolData) {\n            console.warn('Current tool not found:', currentToolId);\n            seeAlsoSection.style.display = 'none';\n            return;\n        }\n\n        // Wygeneruj powi\u0105zane narz\u0119dzia\n        const relatedTools = generateRelatedTools(currentToolId, currentToolData, toolCatalog);\n        \n        if (relatedTools.length === 0) {\n            console.info('No related tools found for:', currentToolId);\n            seeAlsoSection.style.display = 'none';\n            return;\n        }\n\n        // Renderuj karuzel\u0119\n        renderSeeAlsoCards(relatedTools);\n\n        // Skonfiguruj nawigacj\u0119\n        setupCarouselNavigation();\n        \n        // Zastosuj poprawki typograficzne\n        setTimeout(() => {\n            applyTypographyRules();\n        }, 100);\n        \n    } catch (error) {\n        console.error('Error initializing Zobacz r\u00F3wnie\u017C section:', error);\n        seeAlsoSection.style.display = 'none';\n    }\n}\n\nfunction findToolById(toolId, toolCatalog) {\n    for (const category of toolCatalog) {\n        for (const subcategory of category.subcategories) {\n            const tool = subcategory.tools.find(t => t.id === toolId && t.enabled !== false);\n            if (tool) {\n                return {\n                    tool,\n                    category,\n                    subcategory\n                };\n            }\n        }\n    }\n    return null;\n}\n\nfunction generateRelatedTools(currentToolId, currentToolData, toolCatalog) {\n    const { tool: currentTool, category: currentCategory, subcategory: currentSubcategory } = currentToolData;\n    const relatedTools = [];\n    const maxTools = SEE_ALSO_CONFIG.MAX_TOOLS;\n\n    // Funkcja wczesnego zako\u0144czenia dla poprawy wydajno\u015Bci\n    const addToolsWithLimit = (toolsToAdd) => {\n        const remainingSlots = maxTools - relatedTools.length;\n        if (remainingSlots <= 0) return false;\n        \n        const toolsToTake = toolsToAdd.slice(0, remainingSlots);\n        relatedTools.push(...toolsToTake);\n        return relatedTools.length < maxTools;\n    };\n\n    // Priorytet 1: Ta sama podkategoria (bez bie\u017C\u0105cego narz\u0119dzia)\n    const sameSubcategoryTools = currentSubcategory.tools\n        .filter(tool => tool.id !== currentToolId && tool.enabled !== false)\n        .map(tool => ({\n            tool,\n            category: currentCategory,\n            subcategory: currentSubcategory,\n            priority: 1\n        }));\n    \n    if (!addToolsWithLimit(sameSubcategoryTools)) {\n        return relatedTools.slice(0, maxTools);\n    }\n\n    // Priorytet 2: Ta sama kategoria, inne podkategorie\n    for (const subcategory of currentCategory.subcategories) {\n        if (subcategory.name === currentSubcategory.name) continue;\n        \n        const categoryTools = subcategory.tools\n            .filter(tool => tool.enabled !== false)\n            .map(tool => ({\n                tool,\n                category: currentCategory,\n                subcategory,\n                priority: 2\n            }));\n        \n        if (!addToolsWithLimit(categoryTools)) {\n            return relatedTools.slice(0, maxTools);\n        }\n    }\n\n    // Priorytet 3: Powi\u0105zane kategorie (je\u015Bli nadal brakuje narz\u0119dzi)\n    const relatedCategories = findRelatedCategories(currentCategory.category, toolCatalog);\n    \n    for (const category of relatedCategories) {\n        for (const subcategory of category.subcategories) {\n            const otherCategoryTools = subcategory.tools\n                .filter(tool => tool.enabled !== false)\n                .map(tool => ({\n                    tool,\n                    category,\n                    subcategory,\n                    priority: 3\n                }));\n            \n            if (!addToolsWithLimit(otherCategoryTools)) {\n                return relatedTools.slice(0, maxTools);\n            }\n        }\n    }\n\n    // Posortuj wg priorytetu i zwr\u00F3\u0107 wynik\n    return relatedTools\n        .sort((a, b) => a.priority - b.priority)\n        .slice(0, maxTools);\n}\n\nfunction findRelatedCategories(currentCategoryName, toolCatalog) {\n    // Wyodr\u0119bnij nazwy kategorii z danych, aby unikn\u0105\u0107 sztywnych warto\u015Bci\n    const allCategories = toolCatalog.map(cat => cat.category);\n    \n    // Zdefiniuj powi\u0105zania kategorii na podstawie faktycznych danych\n    const categoryRelationships = {\n        'Elektronarz\u0119dzia': ['Sprz\u0119t budowlany i ogrodniczy', 'Narz\u0119dzia pomiarowe'],\n        'Sprz\u0119t budowlany i ogrodniczy': ['Elektronarz\u0119dzia', 'Mycie i sprz\u0105tanie'],\n        'Narz\u0119dzia pomiarowe': ['Elektronarz\u0119dzia', 'Sprz\u0119t pomocniczy'],\n        'Mycie i sprz\u0105tanie': ['Sprz\u0119t budowlany i ogrodniczy', 'Sprz\u0119t pomocniczy'],\n        'Sprz\u0119t pomocniczy': ['Narz\u0119dzia pomiarowe', 'Mycie i sprz\u0105tanie'],\n        'Akcesoria samochodowe': ['Sprz\u0119t pomocniczy', 'Mycie i sprz\u0105tanie']\n    };\n\n    const relatedCategoryNames = categoryRelationships[currentCategoryName] || [];\n    \n    // Przefiltruj tak, by zostawi\u0107 tylko kategorie istniej\u0105ce w danych\n    const validRelatedNames = relatedCategoryNames.filter(name => allCategories.includes(name));\n    \n    return toolCatalog.filter(category => \n        validRelatedNames.includes(category.category)\n    );\n}\n\nfunction renderSeeAlsoCards(relatedTools) {\n    const track = document.getElementById('zobacz-takze-track');\n    if (!track) return;\n\n    // Wyczy\u015B\u0107 istniej\u0105c\u0105 zawarto\u015B\u0107\n    track.innerHTML = '';\n\n    // Utw\u00F3rz stan \u0142adowania\n    track.innerHTML = '<div class=\"loading-state\">\u0141adowanie powi\u0105zanych narz\u0119dzi...</div>';\n\n    // U\u017Cyj setTimeout, aby kr\u00F3tko pokaza\u0107 stan \u0142adowania (lepszy UX)\n    setTimeout(() => {\n        const fragment = document.createDocumentFragment();\n\n        relatedTools.forEach(({ tool, category, subcategory }) => {\n            const toolCard = createSeeAlsoCard(tool, category, subcategory);\n            fragment.appendChild(toolCard);\n        });\n\n        track.innerHTML = '';\n        track.appendChild(fragment);\n\n        // Skonfiguruj leniwe \u0142adowanie obraz\u00F3w\n        // Zaktualizuj stan nawigacji po renderowaniu\n        setTimeout(() => {\n            const carousel = document.getElementById('zobacz-takze-carousel');\n            if (carousel) {\n                // Wywo\u0142aj aktualizacj\u0119 stanu nawigacji\n                const event = new Event('scroll');\n                carousel.dispatchEvent(event);\n            }\n        }, 50);\n        \n    }, SEE_ALSO_CONFIG.LOADING_DELAY);\n}\n\nfunction createSeeAlsoCard(tool, category, subcategory) {\n    const card = document.createElement('a');\n    card.className = 'zobacz-takze-card';\n    card.href = buildPrettyPath(category?.category, subcategory?.name, tool.id);\n    card.setAttribute('data-tool-id', tool.id);\n\n    // Validate tool data and provide fallbacks\n    const toolName = tool.name || 'Nienazwane narz\u0119dzie';\n    const toolImage = toRootPath(tool.image || 'images/placeholder.webp');\n    const categoryName = category?.category || 'Nieznana kategoria';\n    const subcategoryName = subcategory?.name || 'Nieznana podkategoria';\n\n    // Get pricing info with better error handling\n    let priceText = 'Zapytaj o cen\u0119';\n    if (tool.pricing && typeof tool.pricing === 'object') {\n        const firstPrice = Object.values(tool.pricing).find(price => \n            typeof price === 'number' || (typeof price === 'string' && price !== 'Zapytaj o cen\u0119')\n        );\n        \n        if (firstPrice && typeof firstPrice === 'number') {\n            priceText = `od ${firstPrice} z\u0142/dzie\u0144`;\n        }\n    }\n\n    // Sanitize content to prevent XSS\n    const safeToolName = fixPolishOrphans(stripHtmlTags(toolName));\n    const safeCategoryName = fixPolishOrphans(stripHtmlTags(categoryName));\n    const safeSubcategoryName = fixPolishOrphans(stripHtmlTags(subcategoryName));\n\n    card.innerHTML = `\n        <div class=\"zobacz-takze-card-image\">\n            <img src=\"${toolImage}\" alt=\"${safeToolName}\" loading=\"lazy\" class=\"card-img\" onerror=\"this.src='/images/placeholder.webp'\" width=\"300\" height=\"200\" decoding=\"async\">\n            <div class=\"card-overlay\">\n                <span class=\"card-price\">${priceText}</span>\n            </div>\n        </div>\n        <div class=\"zobacz-takze-card-content\">\n            <h3 class=\"card-title\">${safeToolName}</h3>\n            <p class=\"card-category\">${safeCategoryName} \u203A ${safeSubcategoryName}</p>\n        </div>\n    `;\n\n    return card;\n}\n\nfunction setupCarouselNavigation() {\n    const carousel = document.getElementById('zobacz-takze-carousel');\n    const track = document.getElementById('zobacz-takze-track');\n    const prevButton = document.querySelector('.carousel-prev');\n    const nextButton = document.querySelector('.carousel-next');\n\n    if (!carousel || !track || !prevButton || !nextButton) return;\n\n    let currentIndex = 0;\n    let isAnimating = false;\n\n    // Zdebounce'owany handler przewijania dla wydajno\u015Bci\n    const handleScroll = debounce(() => {\n        updateNavigationState();\n    }, 100);\n\n    // Aktualizuj stan przycisk\u00F3w nawigacji\n    function updateNavigationState() {\n        const scrollLeft = carousel.scrollLeft;\n        const maxScroll = carousel.scrollWidth - carousel.clientWidth;\n        const tolerance = SEE_ALSO_CONFIG.SCROLL_TOLERANCE;\n\n        // Je\u015Bli zawarto\u015Bci jest za ma\u0142o do przewini\u0119cia \u2013 wy\u0142\u0105cz oba przyciski\n        if (maxScroll <= tolerance) {\n            prevButton.disabled = true;\n            nextButton.disabled = true;\n        } else {\n            // Standardowa logika, gdy jest co przewija\u0107\n            prevButton.disabled = scrollLeft <= tolerance;\n            nextButton.disabled = scrollLeft >= maxScroll - tolerance;\n        }\n        \n        prevButton.classList.toggle('disabled', prevButton.disabled);\n        nextButton.classList.toggle('disabled', nextButton.disabled);\n    }\n\n    // Funkcja p\u0142ynnego przewijania\n    function smoothScroll(direction) {\n        if (isAnimating) return;\n        \n        isAnimating = true;\n        \n        // Clear any text selection to prevent highlighting during rapid clicking\n        clearTextSelection();\n        const cardWidth = track.firstElementChild?.offsetWidth || SEE_ALSO_CONFIG.CARD_WIDTH;\n        const gap = getCarouselGapPx(track);\n        const scrollDistance = cardWidth + gap;\n        const currentScroll = carousel.scrollLeft;\n        const maxScroll = carousel.scrollWidth - carousel.clientWidth;\n        \n        let targetScroll;\n        if (direction === 'next') {\n            targetScroll = currentScroll + scrollDistance;\n            // Je\u017Celi jeste\u015Bmy blisko ko\u0144ca, przewi\u0144 do samego ko\u0144ca, aby ostatnia karta by\u0142a w pe\u0142ni widoczna\n            if (targetScroll > maxScroll - scrollDistance) {\n                targetScroll = maxScroll;\n            }\n        } else {\n            targetScroll = currentScroll - scrollDistance;\n        }\n\n        // Upewnij si\u0119, \u017Ce nie przewiniemy poza zakres\n        targetScroll = Math.max(0, Math.min(targetScroll, maxScroll));\n\n        carousel.scrollTo({\n            left: targetScroll,\n            behavior: 'smooth'\n        });\n\n        // Zresetuj flag\u0119 animacji po zako\u0144czeniu przewijania\n        setTimeout(() => {\n            isAnimating = false;\n            updateNavigationState();\n        }, SEE_ALSO_CONFIG.ANIMATION_DURATION);\n    }\n\n    // Dodaj atrybuty dost\u0119pno\u015Bci (ARIA)\n    prevButton.setAttribute('aria-label', 'Poprzednie narz\u0119dzia');\n    nextButton.setAttribute('aria-label', 'Nast\u0119pne narz\u0119dzia');\n    carousel.setAttribute('role', 'region');\n    carousel.setAttribute('aria-label', 'Powi\u0105zane narz\u0119dzia');\n\n    // Funkcja globalnego czyszczenia zaznaczenia tekstu\n    function clearTextSelection() {\n        if (window.getSelection) {\n            const selection = window.getSelection();\n            if (selection.rangeCount > 0) {\n                selection.removeAllRanges();\n            }\n        }\n        if (document.selection && document.selection.clear) {\n            document.selection.clear();\n        }\n    }\n\n    // Funkcja tymczasowego wy\u0142\u0105czenia zaznaczania tekstu\n    function disableTextSelection() {\n        document.body.style.userSelect = 'none';\n        document.body.style.webkitUserSelect = 'none';\n        document.body.style.mozUserSelect = 'none';\n        document.body.style.msUserSelect = 'none';\n    }\n\n    // Funkcja ponownego w\u0142\u0105czenia zaznaczania tekstu\n    function enableTextSelection() {\n        document.body.style.userSelect = '';\n        document.body.style.webkitUserSelect = '';\n        document.body.style.mozUserSelect = '';\n        document.body.style.msUserSelect = '';\n    }\n\n    // Listenery przycisk\u00F3w\n    prevButton.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        disableTextSelection();\n        clearTextSelection();\n        smoothScroll('prev');\n        // Re-enable text selection after animation completes\n        setTimeout(enableTextSelection, SEE_ALSO_CONFIG.ANIMATION_DURATION + 50);\n    });\n\n    nextButton.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        disableTextSelection();\n        clearTextSelection();\n        smoothScroll('next');\n        // Re-enable text selection after animation completes\n        setTimeout(enableTextSelection, SEE_ALSO_CONFIG.ANIMATION_DURATION + 50);\n    });\n\n    // Zapobiegaj zaznaczaniu przy mousedown\n    prevButton.addEventListener('mousedown', (e) => {\n        e.preventDefault();\n    });\n\n    nextButton.addEventListener('mousedown', (e) => {\n        e.preventDefault();\n    });\n\n    // Listener zdarzenia przewijania (scroll)\n    carousel.addEventListener('scroll', handleScroll);\n\n    // Nawigacja klawiatur\u0105\n    carousel.addEventListener('keydown', (e) => {\n        if (e.key === 'ArrowLeft') {\n            e.preventDefault();\n            smoothScroll('prev');\n        } else if (e.key === 'ArrowRight') {\n            e.preventDefault();\n            smoothScroll('next');\n        }\n    });\n\n    // Pocz\u0105tkowa aktualizacja stanu po wyrenderowaniu zawarto\u015Bci\n    if (typeof requestAnimationFrame === 'function') {\n        requestAnimationFrame(updateNavigationState);\n    } else {\n        updateNavigationState();\n    }\n    setTimeout(updateNavigationState, 250);\n\n    // Zachowaj funkcj\u0119 sprz\u0105taj\u0105c\u0105 na przysz\u0142o\u015B\u0107\n    const resizeHandler = debounce(updateNavigationState, 200);\n    window.addEventListener('resize', resizeHandler);\n    \n    // Do\u0142\u0105cz funkcj\u0119 sprz\u0105taj\u0105c\u0105 do elementu, aby m\u00F3c j\u0105 wywo\u0142a\u0107 p\u00F3\u017Aniej\n    carousel.seeAlsoCleanup = () => {\n        window.removeEventListener('resize', resizeHandler);\n        carousel.removeEventListener('scroll', handleScroll);\n    };\n}\n\n// ========== PHONE MODAL FUNCTIONALITY ==========\n\nfunction initPhoneModal() {\n    const callButton = document.getElementById('call-button');\n    const phoneModal = document.getElementById('phone-modal');\n    const closeButton = document.getElementById('close-phone-modal');\n    const modalOverlay = phoneModal?.querySelector('.phone-modal-overlay');\n\n    if (!callButton || !phoneModal) return;\n\n    // Show modal\n    function showModal() {\n        // Immediately show modal with background blur\n        phoneModal.style.display = 'flex';\n        phoneModal.style.opacity = '1';\n        document.body.style.overflow = 'hidden';\n        \n        // Start with modal content hidden and scaled down\n        const modalContent = phoneModal.querySelector('.phone-modal-content');\n        if (modalContent) {\n            modalContent.style.opacity = '0';\n            modalContent.style.transform = 'scale(0.8)';\n            modalContent.style.transition = 'all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)';\n\n            // Animate modal content in (to 85% size)\n            requestAnimationFrame(() => {\n                modalContent.style.opacity = '1';\n                modalContent.style.transform = 'scale(0.85)';\n            });\n        }\n    }\n\n    // Hide modal\n    function hideModal() {\n        const modalContent = phoneModal.querySelector('.phone-modal-content');\n        if (modalContent) {\n            modalContent.style.opacity = '0';\n            modalContent.style.transform = 'scale(0.8)';\n        }\n        \n        setTimeout(() => {\n            phoneModal.style.display = 'none';\n            phoneModal.style.opacity = '';\n            document.body.style.overflow = '';\n            \n            // Reset modal content styles\n            if (modalContent) {\n                modalContent.style.opacity = '';\n                modalContent.style.transform = '';\n                modalContent.style.transition = '';\n            }\n        }, 300);\n    }\n\n    // Event listeners\n    callButton.addEventListener('click', showModal);\n    \n    if (closeButton) {\n        closeButton.addEventListener('click', hideModal);\n    }\n    \n    if (modalOverlay) {\n        modalOverlay.addEventListener('click', hideModal);\n    }\n\n    // Close on Escape key\n    document.addEventListener('keydown', (e) => {\n        if (e.key === 'Escape' && phoneModal.style.display === 'flex') {\n            hideModal();\n        }\n    });\n\n    // Close modal after phone number selection\n    const phoneOptions = phoneModal.querySelectorAll('.phone-option');\n    phoneOptions.forEach(option => {\n        option.addEventListener('click', () => {\n            setTimeout(hideModal, 100); // Small delay to allow the call to initiate\n        });\n    });\n}\n\n// Initialize phone modal when DOM is loaded\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initPhoneModal);\n} else {\n    initPhoneModal();\n}\n"],
  "mappings": "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",
  "names": ["addMediaListener", "query", "handler", "setupGridScrollLimit", "desktopQuery", "updateGridState", "isDesktop", "grid", "shouldScroll", "setupSubmenuScrollLimit", "visibleCount", "recalc", "contentEl", "CookieManager", "status", "patterns", "cookie", "name", "pattern", "removedCount", "eqPos", "consent", "shouldHaveCookies", "hasCookies", "__publicField", "Analytics", "src", "attrs", "s", "k", "v", "resolve", "reject", "f", "b", "e", "n", "t", "error", "c", "l", "a", "r", "i", "y", "setClarityConsent", "validateClarityConsent", "loadTrackingScripts", "trackingResults", "successful", "failed", "result", "index", "success", "service", "granted", "maxAttempts", "currentAttempt", "timeout", "attemptConsent", "delay", "showCookieSettings", "cookiePopup", "revokeCookieConsent", "_", "consentStatus", "hasClarityCookies", "fixPolishOrphans", "text", "orphans", "orphan", "regex", "toRootPath", "path", "slugify", "input", "map", "ch", "buildPrettyPath", "categoryName", "subcategoryName", "toolId", "parts", "resolveCategory", "toolCatalog", "resolveSubcategory", "category", "getRouteParams", "params", "subcategory", "base", "canUsePrettyUrls", "protocol", "hostname", "fetchData", "response", "renderCategories", "initScrollAnimations", "renderSubcategories", "renderTools", "renderToolDetails", "initializeSeeAlso", "renderNavigationCategories", "initializeDropdown", "initializeMobileMenu", "initializeSearch", "initializeThemeSwitcher", "initializeSeoManager", "initializeContactEventTracking", "normalizeFooterCopyright", "applyTypographyRules", "applyPolishOrphansToStaticContent", "scrollToTopBtn", "isButtonVisible", "isAnimating", "debounce", "showButtonEffect", "jumpOutEffect", "startLink", "trackContactEvent", "source", "event", "_a", "el", "href", "elements", "conjunctions", "func", "wait", "args", "hamburger", "overlay", "container", "panels", "mainMenuPanel", "populateMobileMenuCategories", "closeMobileMenu", "openMobileMenu", "handleContainerClick", "backButton", "submenuLink", "categoryLink", "targetPanel", "showMobileMenuPanel", "cat", "populateMobileMenuSubcategories", "resetMobileMenuPanels", "panelId", "animate", "panel", "categoriesList", "fragment", "listItem", "link", "stripHtmlTags", "subcategoriesList", "categoryTitle", "renderNavigationCategories", "toolCatalog", "navContainer", "category", "link", "buildPrettyPath", "stripHtmlTags", "renderCategories", "contentGrid", "cardLink", "imageWrapper", "img", "toRootPath", "titleWrapper", "fixPolishOrphans", "createInteractiveBreadcrumb", "text", "linkUrl", "siblings", "type", "parentCategoryForSiblings", "wrapper", "textSpan", "arrow", "dropdownContent", "sibling", "siblingLink", "createSeparator", "separator", "renderSubcategories", "categoryParam", "getRouteParams", "titleElement", "breadcrumbContainer", "resolveCategory", "canUsePrettyUrls", "prettyPath", "_", "homeLink", "categorySpan", "sub", "renderTools", "categoryParam2", "subcategoryParam2", "subcategory", "resolveSubcategory", "categorySiblings", "c", "categoryCrumb", "subcategorySpan", "enabledTools", "tool", "toolCard", "renderToolDetails", "toolId", "cat", "foundTool", "t", "content", "subcategorySiblings", "s", "subcategoryCrumb", "toolSpan", "descriptionElement", "imageElement", "pricingTableBody", "period", "price", "row", "periodCell", "priceCell", "depositKey", "depositFromPricing", "depositValue", "depositRow", "depositLabelCell", "depositValueCell", "initializeDropdown", "navCategories", "subDropdownContainer", "categoryLink", "subDropdownContent", "subcategoryLink", "applyTypographyRules", "setupSubmenuScrollLimit", "normalizeFooterCopyright", "p", "initializeThemeSwitcher", "themeToggle", "currentTheme", "newTheme", "initializeSeoManager", "setMetaRobots", "value", "upsertMetaByName", "url", "isCategoryPage", "isSubcategoryPage", "isToolPage", "isHomePage", "canonicalEl", "canonicalHref", "normalizedPath", "canonicalLooksPretty", "hydrationRequired", "ensureOgTwitterDefaults", "updateCanonical", "upsertMetaByProperty", "categoryName", "parts", "pageUrl", "description", "dynamicTitle", "breadcrumbItems", "hasJsonLdType", "injectJsonLd", "buildBreadcrumbList", "itemList", "buildItemList", "subcategoryName", "params", "toolCtx", "findToolById", "firstPrice", "getFirstNumericPrice", "schemaPrice", "formatPriceForSchema", "descriptionBase", "absoluteUrl", "offer", "product", "ensureOgTwitterDefaults", "defaultImageUrl", "upsertMetaByProperty", "upsertMetaByName", "upsertMetaTag", "attrName", "attrValue", "content", "el", "name", "property", "normalizeCanonicalUrl", "url", "canonical", "path", "hasExtension", "_", "updateCanonical", "normalized", "link", "buildBreadcrumbList", "items", "item", "index", "buildItemList", "entries", "pageUrl", "entry", "injectJsonLd", "object", "script", "hasJsonLdType", "type", "scripts", "s", "data", "t", "absoluteUrl", "getFirstNumericPrice", "pricing", "val", "p", "formatPriceForSchema", "value", "gsapLoaderPromise", "loadGsapLibrary", "scriptUrl", "resolve", "reject", "script", "initScrollAnimations", "gsapInstance", "gsapRef", "allCards", "contactItems", "heroSection", "card", "item", "observerOptions", "observer", "entries", "observerRef", "entry", "target", "items", "grid", "heroElements", "applyPolishOrphansToStaticContent", "privacyContent", "element", "fixPolishOrphans", "node", "span", "stripHtmlTags", "str", "div", "initializeSearch", "toolCatalog", "searchToggle", "searchContainer", "searchInput", "searchClose", "searchResults", "isSearchOpen", "selectedIndex", "searchResultItems", "getSearchHistory", "history", "e", "saveToSearchHistory", "query", "item", "clearSearchHistory", "showSearchHistory", "escapeHtml", "historyItems", "index", "toolName", "performSearch", "updateHistorySelection", "clearBtn", "text", "openSearch", "closeSearch", "updateSelection", "debounce", "results", "queryLower", "category", "subcategory", "tool", "nameMatch", "descMatch", "categoryMatch", "subcategoryMatch", "displaySearchResults", "a", "b", "order", "result", "highlightedName", "highlightText", "toolId", "toolResult", "r", "canUsePrettyUrls", "buildPrettyPath", "regex", "escapeRegex", "string", "cookiePopup", "acceptBtn", "rejectBtn", "consent", "CookieManager", "loadTrackingScripts", "hidePopup", "setClarityConsent", "cookieSettingsLink", "revokeCookieConsent", "showCookieSettings", "SEE_ALSO_CONFIG", "getCarouselGapPx", "track", "style", "gap", "_", "initializeSeeAlso", "seeAlsoSection", "setupCarouselNavigation", "applyTypographyRules", "currentToolId", "getRouteParams", "currentToolData", "findToolById", "relatedTools", "generateRelatedTools", "renderSeeAlsoCards", "error", "t", "currentTool", "currentCategory", "currentSubcategory", "maxTools", "addToolsWithLimit", "toolsToAdd", "remainingSlots", "toolsToTake", "sameSubcategoryTools", "categoryTools", "relatedCategories", "findRelatedCategories", "otherCategoryTools", "currentCategoryName", "allCategories", "cat", "validRelatedNames", "name", "fragment", "toolCard", "createSeeAlsoCard", "carousel", "event", "card", "toolImage", "toRootPath", "categoryName", "subcategoryName", "priceText", "firstPrice", "price", "safeToolName", "fixPolishOrphans", "safeCategoryName", "safeSubcategoryName", "prevButton", "nextButton", "currentIndex", "isAnimating", "handleScroll", "updateNavigationState", "scrollLeft", "maxScroll", "tolerance", "smoothScroll", "direction", "_a", "clearTextSelection", "cardWidth", "scrollDistance", "currentScroll", "targetScroll", "selection", "disableTextSelection", "enableTextSelection", "resizeHandler", "initPhoneModal", "callButton", "phoneModal", "closeButton", "modalOverlay", "showModal", "modalContent", "hideModal", "option"]
}
